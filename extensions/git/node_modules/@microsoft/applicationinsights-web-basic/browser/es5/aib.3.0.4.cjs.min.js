/*!
 * Application Insights JavaScript Web SDK - Basic, 3.0.4
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */
"use strict";var UNDEF_VALUE=undefined,NULL_VALUE=null,EMPTY="",BOOLEAN="boolean",FUNCTION="function",NUMBER="number",OBJECT="object",PROTOTYPE="prototype",__PROTO__="__proto__",STRING="string",UNDEFINED="undefined",CONSTRUCTOR="constructor",SYMBOL="Symbol",POLYFILL_TAG="_polyfill",INDEX_OF="indexOf",LENGTH="length",DONE="done",VALUE="value",NAME="name",SLICE="slice",ObjClass$1=Object,ObjProto$1=ObjClass$1[PROTOTYPE],StrCls=String,StrProto=StrCls[PROTOTYPE],MathCls=Math,ArrCls=Array,ArrProto=ArrCls[PROTOTYPE];function safeGet(e,t){try{t=e()}catch(n){}return t}var PRIMITIVE_TYPES=[STRING,NUMBER,BOOLEAN,UNDEFINED,"symbol","bigint"];function _createIs(t){return function(e){return typeof e===t}}function _createObjIs(e){var t="[object "+e+"]";return function(e){return!(!e||objToString(e)!==t)}}function objToString(e){return ObjProto$1.toString.call(e)}function isUndefined(e){return typeof e===UNDEFINED||e===UNDEFINED}function isNullOrUndefined(e){return e===NULL_VALUE||isUndefined(e)}function isStrictNullOrUndefined(e){return e===NULL_VALUE||!isDefined(e)}function isDefined(e){return!!e||e!==UNDEF_VALUE}var isPrimitiveType=function(e){return e!==OBJECT&&!!~PRIMITIVE_TYPES.indexOf(e)},isString=_createIs(STRING),isFunction=_createIs(FUNCTION);function isObject(e){return!(!e&&isNullOrUndefined(e)||!e||typeof e!==OBJECT)}var isArray=ArrCls.isArray,isDate=_createObjIs("Date"),isNumber=_createIs(NUMBER),isBoolean=_createIs(BOOLEAN),isError=_createObjIs("Error");function isPromiseLike(e){return!!e&&isFunction(e.then)}function isTruthy(e){return!(!e||safeGet(function(){return!(e&&0+e)},!e))}var objGetOwnPropertyDescriptor=ObjClass$1.getOwnPropertyDescriptor;function objHasOwnProperty(e,t){return e&&ObjProto$1.hasOwnProperty.call(e,t)}var objHasOwn=ObjClass$1.hasOwn||polyObjHasOwn;function polyObjHasOwn(e,t){return objHasOwnProperty(e,t)||!!objGetOwnPropertyDescriptor(e,t)}function objForEachKey(e,t,n){if(e&&isObject(e))for(var r in e)if(objHasOwn(e,r)&&-1===t.call(n||e,r,e[r]))break}function _createKeyValueMap(e,n,r,t){var o={};return objForEachKey(e,function(e,t){o[e]=n?t:e,o[t]=r?t:e}),t(o)}function throwError(e){throw Error(e)}function throwTypeError(e){throw new TypeError(e)}var _objFreeze=ObjClass$1.freeze,_doNothing=function(e){return e},_getProto=function(e){return e[__PROTO__]||NULL_VALUE},objAssign=ObjClass$1.assign;function objKeys(e){return isObject(e)&&e!==NULL_VALUE||throwTypeError("objKeys called on non-object"),ObjClass$1.keys(e)}function objDeepFreeze(e){return _objFreeze&&objForEachKey(e,function(e,t){(isArray(t)||isObject(t))&&_objFreeze(t)}),objFreeze(e)}var objFreeze=_objFreeze||_doNothing,objGetPrototypeOf=ObjClass$1.getPrototypeOf||_getProto;function createEnum(e){return _createKeyValueMap(e,1,0,objDeepFreeze)}function createEnumKeyMap(e){return _createKeyValueMap(e,0,0,objDeepFreeze)}function createSimpleMap(e){var n={};return objForEachKey(e,function(e,t){n[e]=t[1],n[t[0]]=t[1]}),objDeepFreeze(n)}function createTypeMap(e){return createSimpleMap(e)}var _globalCfg,_wellKnownSymbolMap=createEnumKeyMap({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),asString=StrCls,GLOBAL_CONFIG_KEY="__tsUtils$gblCfg";function _getGlobalValue(){var e;return(e=(e=(e=typeof globalThis!==UNDEFINED?globalThis:e)||typeof self===UNDEFINED?e:self)||typeof window===UNDEFINED?e:window)||typeof global===UNDEFINED?e:global}function _getGlobalConfig(){var e;return _globalCfg||(e=_getGlobalValue()||{},_globalCfg=e[GLOBAL_CONFIG_KEY]=e[GLOBAL_CONFIG_KEY]||{}),_globalCfg}function dumpObj(e,t){var n=EMPTY;if(isError(e))n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'";else try{n=JSON.stringify(e,NULL_VALUE,t?isNumber(t)?t:4:UNDEF_VALUE)}catch(r){n=" - "+dumpObj(r,t)}return objToString(e)+": "+n}var _arrSlice=ArrProto[SLICE],_throwMissingFunction=function(e,t){throwTypeError("'"+asString(e)+"' not defined for "+dumpObj(t))},_unwrapInstFunction=function(t){return function(e){return e[t].apply(e,_arrSlice.call(arguments,1))}},_unwrapFunction=function(n,e){var r=e&&e[n];return function(e){var t=e&&e[n]||r;if(t)return t.apply(e,_arrSlice.call(arguments,1));_throwMissingFunction(n,e)}},_unwrapFunctionWithPoly=function(r,e,o){var i=e&&e[r];return function(e){var t,n=e&&e[r]||i;if(n||o)return t=arguments,(n||o).apply(e,n?_arrSlice.call(t,1):t);_throwMissingFunction(r,e)}};function _unwrapProp(t){return function(e){return e[t]}}var mathMax=MathCls.max,strSlice=_unwrapFunction(SLICE,StrProto),strSubstring=_unwrapFunction("substring",StrProto),strSubstr=_unwrapFunctionWithPoly("substr",StrProto,polyStrSubstr);function polyStrSubstr(e,t,n){return isNullOrUndefined(e)&&throwTypeError("'polyStrSubstr called with invalid "+dumpObj(e)),n<0?EMPTY:((t=t||0)<0&&(t=mathMax(t+e[LENGTH],0)),isUndefined(n)?strSlice(e,t):strSlice(e,t,t+n))}function strLeft(e,t){return strSubstring(e,0,t)}var _polySymbols,UNIQUE_REGISTRY_ID="_urid";function _globalSymbolRegistry(){var e;return _polySymbols||(e=_getGlobalConfig(),_polySymbols=e.gblSym=e.gblSym||{k:{},s:{}}),_polySymbols}var _wellKnownSymbolCache={};function polyNewSymbol(e){var t={description:asString(e),toString:function(){return SYMBOL+"("+e+")"}};return t[POLYFILL_TAG]=!0,t}function polySymbolFor(e){var t,n,r=_globalSymbolRegistry();return objHasOwn(r.k,e)||(t=polyNewSymbol(e),n=objKeys(r.s).length,t[UNIQUE_REGISTRY_ID]=function(){return n+"_"+t.toString()},r.k[e]=t,r.s[t[UNIQUE_REGISTRY_ID]()]=asString(e)),r.k[e]}function polyGetKnownSymbol(e){e=_wellKnownSymbolMap[e];return e?_wellKnownSymbolCache[e]=_wellKnownSymbolCache[e]||polyNewSymbol(SYMBOL+"."+e):void 0}var propMap={e:"enumerable",c:"configurable",v:VALUE,w:"writable",g:"get",s:"set"};function _createProp(t){var e,n={};return n[propMap.c]=!0,n[propMap.e]=!0,t.l&&(n.get=function(){return t.l.v},(e=objGetOwnPropertyDescriptor(t.l,"v"))&&e.set&&(n.set=function(e){t.l.v=e})),objForEachKey(t,function(e,t){n[propMap[e]]=isUndefined(t)?n[propMap[e]]:t}),n}var _globalLazyTestHooks,objDefineProp=ObjClass$1.defineProperty;function objDefine(e,t,n){return objDefineProp(e,t,_createProp(n))}var _fetchLazyTestHooks=function(){_globalLazyTestHooks=_getGlobalConfig(),_fetchLazyTestHooks=NULL_VALUE};function getLazy(t){var n={};return _fetchLazyTestHooks&&_fetchLazyTestHooks(),n.b=_globalLazyTestHooks.lzy,objDefineProp(n,"v",{configurable:!0,get:function(){var e=t();return _globalLazyTestHooks.lzy||(objDefineProp(n,"v",{value:e}),n.b&&delete n.b),_globalLazyTestHooks.lzy&&n.b!==_globalLazyTestHooks.lzy&&(n.b=_globalLazyTestHooks.lzy),e}}),n}function safeGetLazy(e,t){return getLazy(function(){return safeGet(e,t)})}var _cachedGlobal,_cachedWindow,_cachedDocument,_cachedNavigator,_isNode,_symbol,_symbolFor,_symbolKeyFor,_iterSymbol,WINDOW="window",lazySafeGetInst=function(e){return safeGetLazy(function(){return getInst(e)||UNDEF_VALUE},UNDEF_VALUE)},getGlobal=function(e){return(_cachedGlobal=!_cachedGlobal||!1===e||_globalLazyTestHooks&&_globalLazyTestHooks.lzy&&!_cachedGlobal.b?safeGetLazy(_getGlobalValue,NULL_VALUE):_cachedGlobal).v},getInst=function(e,t){t=_cachedGlobal&&!1!==t?_cachedGlobal.v:getGlobal(t);return t&&t[e]?t[e]:e===WINDOW&&_cachedWindow?_cachedWindow.v:NULL_VALUE},hasDocument=function(){return!!getDocument()},getDocument=function(){return(_cachedDocument=!_cachedDocument||_globalLazyTestHooks&&_globalLazyTestHooks.lzy&&!_cachedDocument.b?lazySafeGetInst("document"):_cachedDocument).v},hasWindow=function(){return!!getWindow()},getWindow=function(){return(_cachedWindow=!_cachedWindow||_globalLazyTestHooks&&_globalLazyTestHooks.lzy&&!_cachedWindow.b?lazySafeGetInst(WINDOW):_cachedWindow).v},hasNavigator=function(){return!!getNavigator()},getNavigator=function(){return(_cachedNavigator=!_cachedNavigator||_globalLazyTestHooks&&_globalLazyTestHooks.lzy&&!_cachedNavigator.b?lazySafeGetInst("navigator"):_cachedNavigator).v},isNode=function(){return(_isNode=_isNode||safeGetLazy(function(){return!(!process||!(process.versions||{}).node)},!1)).v};function _getSymbolValue(e){return safeGetLazy(function(){return _symbol.v?_symbol.v[e]:UNDEF_VALUE},UNDEF_VALUE)}function hasSymbol(){return!!getSymbol()}function getSymbol(){var e=!_symbol||_globalLazyTestHooks&&_globalLazyTestHooks.lzy&&!_symbol.b;return e&&(_symbol=lazySafeGetInst(SYMBOL)),_symbolFor&&!e||(_symbolFor=_getSymbolValue("for")),_symbolKeyFor&&!e||(_symbolKeyFor=_getSymbolValue("keyFor")),_symbol.v}function getKnownSymbol(e,t){var n=_wellKnownSymbolMap[e];return _symbol&&(!_globalLazyTestHooks.lzy||_symbol.b)||getSymbol(),_symbol.v?_symbol.v[n||e]:t?UNDEF_VALUE:polyGetKnownSymbol(e)}function newSymbol(e,t){return _symbol&&(!_globalLazyTestHooks.lzy||_symbol.b)||getSymbol(),_symbol.v?_symbol.v(e):t?NULL_VALUE:polyNewSymbol(e)}function symbolFor(e){return _symbolFor&&(!_globalLazyTestHooks.lzy||_symbol.b)||getSymbol(),(_symbolFor.v||polySymbolFor)(e)}function isIterator(e){return!!e&&isFunction(e.next)}function isIterable(e){return!isStrictNullOrUndefined(e)&&isFunction(e[getKnownSymbol(3)])}function iterForOf(e,t,n){if(e&&(isIterator(e)||(e=e[(_iterSymbol=_iterSymbol||getLazy(function(){return getKnownSymbol(3)})).v]?e[_iterSymbol.v]():null),isIterator(e))){var r=void 0,o=void 0;try{for(var i=0;!(o=e.next())[DONE]&&-1!==t.call(n||e,o[VALUE],i,e);)i++}catch(a){r={e:a},e["throw"]&&(o=null,e["throw"](r))}finally{try{o&&!o[DONE]&&e["return"]&&e["return"](o)}finally{if(r)throw r.e}}}}var fnApply=_unwrapInstFunction("apply");function arrAppend(t,e){return!isUndefined(e)&&t&&(isArray(e)?fnApply(t.push,t,e):isIterator(e)||isIterable(e)?iterForOf(e,function(e){t.push(e)}):t.push(e)),t}function arrForEach(e,t,n){if(e)for(var r=e[LENGTH]>>>0,o=0;o<r&&!(o in e&&-1===t.call(n||e,e[o],o,e));o++);}var _isProtoArray,arrIndexOf=_unwrapFunction(INDEX_OF,ArrProto),arrMap=_unwrapFunction("map",ArrProto),arrSlice=_unwrapFunction(SLICE,ArrProto),fnCall=_unwrapInstFunction("call"),arrReduce=_unwrapFunction("reduce",ArrProto),_objCreate=ObjClass$1.create,objCreate=_objCreate||polyObjCreate;function polyObjCreate(e){if(!e)return{};var t=typeof e;if(t!==OBJECT&&t!==FUNCTION)throw new TypeError("Prototype must be an Object or function: "+dumpObj(e));function n(){}return n[PROTOTYPE]=e,new n}function objSetPrototypeOf(e,t){return(ObjClass$1.setPrototypeOf||function(n,e){(_isProtoArray=_isProtoArray||getLazy(function(){var e={};return e[__PROTO__]=[],e instanceof Array})).v?n[__PROTO__]=e:objForEachKey(e,function(e,t){return n[e]=t})})(e,t)}var _createCustomError=function(e,t,n){function r(){this.constructor=t,_safeDefineName(this,e)}return _safeDefineName(t,e),(t=objSetPrototypeOf(t,n))[PROTOTYPE]=n===NULL_VALUE?objCreate(n):(r[PROTOTYPE]=n[PROTOTYPE],new r),t},_safeSetName=function(e,t){try{t&&(e[NAME]=t)}catch(n){}},_safeDefineName=function(e,t){try{objDefine(e,NAME,{v:t,c:!0,e:!1})}catch(n){}};function createCustomError(r,o,e){var i=e||Error,a=i[PROTOTYPE][NAME],_=Error.captureStackTrace;return _createCustomError(r,function(){var e=this;try{_safeSetName(i,r);var t,n=fnApply(i,e,arrSlice(arguments))||e;return n!==e&&(t=objGetPrototypeOf(e))!==objGetPrototypeOf(n)&&objSetPrototypeOf(n,t),_&&_(n,e[CONSTRUCTOR]),o&&o(n,arguments),n}finally{_safeSetName(i,a)}},i)}function utcNow(){return(Date.now||polyUtcNow)()}function polyUtcNow(){return(new Date).getTime()}function _createTrimFn(t){return function(e){return isNullOrUndefined(e)&&throwTypeError("strTrim called ["+dumpObj(e)+"]"),e&&e.replace?e.replace(t,EMPTY):e}}var _fnToString,_objCtrFnString,_gblWindow,polyStrTrim=_createTrimFn(/^\s+|(?=\s)\s+$/g),strTrim=_unwrapFunctionWithPoly("trim",StrProto,polyStrTrim);function isPlainObject(e){if(!e||typeof e!==OBJECT)return!1;var t=!1;if(e!==(_gblWindow=_gblWindow||!hasWindow()||getWindow())){_objCtrFnString||(_fnToString=Function[PROTOTYPE].toString,_objCtrFnString=fnCall(_fnToString,ObjClass$1));try{var n=objGetPrototypeOf(e),t=(t=!n)||(n=objHasOwnProperty(n,CONSTRUCTOR)?n[CONSTRUCTOR]:n)&&typeof n===FUNCTION&&_fnToString.call(n)===_objCtrFnString}catch(r){}}return t}var _defaultDeepCopyHandler=function(e){return e.value&&plainObjDeepCopyHandler(e),!0},defaultDeepCopyHandlers=[arrayDeepCopyHandler,plainObjDeepCopyHandler,functionDeepCopyHandler,dateDeepCopyHandler];function _getSetVisited(e,t,n,r){var o;return arrForEach(e,function(e){if(e.k===t)return o=e,-1}),o||(o={k:t,v:t},e.push(o),r(o)),o.v}function _deepCopy(n,e,r,t){var o=r.handler,t=r.path?t?r.path.concat(t):r.path:[],i={handler:r.handler,src:r.src,path:t},a=typeof e,_=!1,s=!1,c=(e&&a===OBJECT?_=isPlainObject(e):s=e===NULL_VALUE||isPrimitiveType(a),{type:a,isPrim:s,isPlain:_,value:e,result:e,path:t,origin:r.src,copy:function(e,t){return _deepCopy(n,e,t?i:r,t)},copyTo:function(e,t){return _copyProps(n,e,t,i)}});return c.isPrim?o&&fnCall(o,r,c)?c.result:e:_getSetVisited(n,e,t,function(t){objDefine(c,"result",{g:function(){return t.v},s:function(e){t.v=e}});for(var e=0,n=o;!fnCall(n||(e<defaultDeepCopyHandlers.length?defaultDeepCopyHandlers[e++]:_defaultDeepCopyHandler),r,c);)n=NULL_VALUE})}function _copyProps(e,t,n,r){if(!isNullOrUndefined(n))for(var o in n)t[o]=_deepCopy(e,n[o],r,o);return t}function objCopyProps(e,t,n){return _copyProps([],e,t,{handler:n,src:t,path:[]})}function objDeepCopy(e,t){return _deepCopy([],e,{handler:t,src:e})}function arrayDeepCopyHandler(e){var t,n=e.value;return!!isArray(n)&&((t=e.result=[]).length=n.length,e.copyTo(t,n),!0)}function dateDeepCopyHandler(e){var t=e.value;return!!isDate(t)&&(e.result=new Date(t.getTime()),!0)}function functionDeepCopyHandler(e){return e.type===FUNCTION}function plainObjDeepCopyHandler(e){var t,n=e.value;return!(!n||!e.isPlain||(t=e.result={},e.copyTo(t,n),0))}function _doExtend(t,e){return arrForEach(e,function(e){objCopyProps(t,e)}),t}function deepExtend(e,t,n,r,o,i,a){return _doExtend(objDeepCopy(e)||{},arrSlice(arguments))}var getLength=_unwrapProp(LENGTH),strEndsWith=_unwrapFunctionWithPoly("endsWith",StrProto,polyStrEndsWith);function polyStrEndsWith(e,t,n){isString(e)||throwTypeError("'"+dumpObj(e)+"' is not a string");var t=isString(t)?t:asString(t),r=t[LENGTH],o=e[LENGTH],n=!isUndefined(n)&&n<o?n:o;return strSubstring(e,n-r,n)===t}var _a$5,strIndexOf=_unwrapFunction(INDEX_OF,StrProto),REF="ref",UNREF="un"+REF,HAS_REF="hasRef",ENABLED="enabled";function _createTimerHandler(e,t,n){var r,o=!0,i=e?t(NULL_VALUE):NULL_VALUE,a=function(){return o=!1,i&&i[UNREF]&&i[UNREF](),r},_=function(){return i=t(i),o||a(),r},s=function(){i&&n(i),i=NULL_VALUE},e={cancel:s,refresh:_};return e[HAS_REF]=function(){return i&&i[HAS_REF]?i[HAS_REF]():o},e[REF]=function(){return o=!0,i&&i[REF]&&i[REF](),r},e[UNREF]=a,e[ENABLED]=!1,objDefineProp(r=e,ENABLED,{get:function(){return!!i},set:function(e){!e&&i&&s(),e&&!i&&_()}}),{h:r,dn:function(){i=NULL_VALUE}}}function _createTimeoutWith(t,e,n,r){var o=isArray(n),i=o?n.length:0,a=(0<i?n[0]:o?UNDEF_VALUE:n)||setTimeout,_=(1<i?n[1]:UNDEF_VALUE)||clearTimeout,s=r[0],c=(r[0]=function(){c.dn(),fnApply(s,t,arrSlice(arguments))},_createTimerHandler(e,function(e){if(e){if(e.refresh)return e.refresh(),e;fnApply(_,t,[e])}return fnApply(a,t,r)},function(e){fnApply(_,t,[e])}));return c.h}function scheduleTimeout(e,t){return _createTimeoutWith(this,!0,UNDEF_VALUE,arrSlice(arguments))}function createTimeout(e,t){return _createTimeoutWith(this,!1,UNDEF_VALUE,arrSlice(arguments))}var Constructor="constructor",Prototype="prototype",strFunction="function",DynInstFuncTable="_dynInstFuncs",DynProxyTag="_isDynProxy",DynClassName="_dynClass",DynClassNamePrefix="_dynCls$",DynInstChkTag="_dynInstChk",DynAllowInstChkTag=DynInstChkTag,DynProtoDefaultOptions="_dfOpts",UnknownValue="_unknown_",str__Proto="__proto__",DynProtoBaseProto="_dyn"+str__Proto,DynProtoGlobalSettings="__dynProto$Gbl",DynProtoCurrent="_dynInstProto",strUseBaseInst="useBaseInst",strSetInstFuncs="setInstFuncs",Obj=Object,_objGetPrototypeOf=Obj.getPrototypeOf,_objGetOwnProps=Obj.getOwnPropertyNames,_gbl=getGlobal(),_gblInst=_gbl[DynProtoGlobalSettings]||(_gbl[DynProtoGlobalSettings]={o:((_a$5={})[strSetInstFuncs]=!0,_a$5[strUseBaseInst]=!0,_a$5),n:1e3});function _isObjectOrArrayPrototype(e){return e&&(e===Obj[Prototype]||e===Array[Prototype])}function _isObjectArrayOrFunctionPrototype(e){return _isObjectOrArrayPrototype(e)||e===Function[Prototype]}function _getObjProto(e){if(e){if(_objGetPrototypeOf)return _objGetPrototypeOf(e);var t=e[str__Proto]||e[Prototype]||(e[Constructor]?e[Constructor][Prototype]:null),n=e[DynProtoBaseProto]||t;objHasOwnProperty(e,DynProtoBaseProto)||(delete e[DynProtoCurrent],n=e[DynProtoBaseProto]=e[DynProtoCurrent]||e[DynProtoBaseProto],e[DynProtoCurrent]=t)}return n}function _forEachProp(e,t){var n=[];if(_objGetOwnProps)n=_objGetOwnProps(e);else for(var r in e)"string"==typeof r&&objHasOwnProperty(e,r)&&n.push(r);if(n&&0<n.length)for(var o=0;o<n.length;o++)t(n[o])}function _isDynamicCandidate(e,t,n){return t!==Constructor&&typeof e[t]===strFunction&&(n||objHasOwnProperty(e,t))}function _throwTypeError(e){throwTypeError("DynamicProto: "+e)}function _getInstanceFuncs(t){var n={};return _forEachProp(t,function(e){!n[e]&&_isDynamicCandidate(t,e,!1)&&(n[e]=t[e])}),n}function _hasVisited(e,t){for(var n=e.length-1;0<=n;n--)if(e[n]===t)return!0;return!1}function _getBaseFuncs(e,t,n,i){function r(e,t,n){var r,o=t[n];return o[DynProxyTag]&&i&&!1!==(r=e[DynInstFuncTable]||{})[DynAllowInstChkTag]&&(o=(r[t[DynClassName]]||{})[n]||o),function(){return o.apply(e,arguments)}}for(var o={},a=(_forEachProp(n,function(e){o[e]=r(t,n,e)}),_getObjProto(e)),_=[];a&&!_isObjectArrayOrFunctionPrototype(a)&&!_hasVisited(_,a);)_forEachProp(a,function(e){!o[e]&&_isDynamicCandidate(a,e,!_objGetPrototypeOf)&&(o[e]=r(t,a,e))}),_.push(a),a=_getObjProto(a);return o}function _getInstFunc(e,t,n,r){var o=null;if(e&&objHasOwnProperty(n,DynClassName)){var i=e[DynInstFuncTable]||{};if((o=(i[n[DynClassName]]||{})[t])||_throwTypeError("Missing ["+t+"] "+strFunction),!o[DynInstChkTag]&&!1!==i[DynAllowInstChkTag]){for(var a=!objHasOwnProperty(e,t),_=_getObjProto(e),s=[];a&&_&&!_isObjectArrayOrFunctionPrototype(_)&&!_hasVisited(s,_);){var c=_[t];if(c){a=c===r;break}s.push(_),_=_getObjProto(_)}try{a&&(e[t]=o),o[DynInstChkTag]=1}catch(u){i[DynAllowInstChkTag]=!1}}}return o}function _getProtoFunc(e,t,n){var r=t[e];return typeof(r=r===n?_getObjProto(t)[e]:r)!==strFunction&&_throwTypeError("["+e+"] is not a "+strFunction),r}function _populatePrototype(o,e,i,a,t){var n,_;_isObjectOrArrayPrototype(o)||(n=i[DynInstFuncTable]=i[DynInstFuncTable]||{},_=n[e]=n[e]||{},!1!==n[DynAllowInstChkTag]&&(n[DynAllowInstChkTag]=!!t),_forEachProp(i,function(e){var t,n,r;_isDynamicCandidate(i,e,!1)&&i[e]!==a[e]&&(_[e]=i[e],delete i[e],objHasOwnProperty(o,e)&&(!o[e]||o[e][DynProxyTag])||(o[e]=(t=o,n=e,(r=function(){return(_getInstFunc(this,n,t,r)||_getProtoFunc(n,t,r)).apply(this,arguments)})[DynProxyTag]=1,r)))}))}function _checkPrototype(e,t){if(_objGetPrototypeOf){for(var n=[],r=_getObjProto(t);r&&!_isObjectArrayOrFunctionPrototype(r)&&!_hasVisited(n,r);){if(r===e)return!0;n.push(r),r=_getObjProto(r)}return!1}return!0}function _getObjName(e,t){return objHasOwnProperty(e,Prototype)?e.name||t||UnknownValue:((e||{})[Constructor]||{}).name||t||UnknownValue}function dynamicProto(e,t,n,r){objHasOwnProperty(e,Prototype)||_throwTypeError("theClass is an invalid class definition.");var o=e[Prototype],i=(_checkPrototype(o,t)||_throwTypeError("["+_getObjName(e)+"] not in hierarchy of ["+_getObjName(t)+"]"),null),e=(objHasOwnProperty(o,DynClassName)?i=o[DynClassName]:(i=DynClassNamePrefix+_getObjName(e,"_")+"$"+_gblInst.n,_gblInst.n++,o[DynClassName]=i),dynamicProto[DynProtoDefaultOptions]),a=!!e[strUseBaseInst],_=(a&&r&&r[strUseBaseInst]!==undefined&&(a=!!r[strUseBaseInst]),_getInstanceFuncs(t)),a=(n(t,_getBaseFuncs(o,t,_,a)),!!_objGetPrototypeOf&&!!e[strSetInstFuncs]);_populatePrototype(o,i,t,_,!1!==(a=a&&r?!!r[strSetInstFuncs]:a))}dynamicProto[DynProtoDefaultOptions]=_gblInst.o;var strShimFunction="function",strShimObject="object",strShimUndefined="undefined",strShimPrototype="prototype",ObjClass=Object,ObjProto=ObjClass[strShimPrototype],strHasOwnProperty=((getGlobal()||{}).Symbol,(getGlobal()||{}).Reflect,"hasOwnProperty"),__objAssignFnImpl=function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])ObjProto[strHasOwnProperty].call(t,o)&&(e[o]=t[o]);return e},__assignFn=objAssign||__objAssignFnImpl,extendStaticsFn=function(e,t){return(extendStaticsFn=ObjClass.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t[strHasOwnProperty](n)&&(e[n]=t[n])})(e,t)};function __extendsFn(e,t){function n(){this.constructor=e}typeof t!==strShimFunction&&null!==t&&throwTypeError("Class extends value "+t+" is not a constructor or null"),extendStaticsFn(e,t),e[strShimPrototype]=null===t?objCreate(t):(n[strShimPrototype]=t[strShimPrototype],new n)}function __spreadArrayFn(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e}var aggregationErrorType,createEnumStyle=createEnum,createValueMap=createTypeMap,_DYN_TO_LOWER_CASE$1="toLowerCase",_DYN_BLK_VAL="blkVal",_DYN_LENGTH$2="length",_DYN_RD_ONLY="rdOnly",_DYN_NOTIFY="notify",_DYN_WARN_TO_CONSOLE="warnToConsole",_DYN_THROW_INTERNAL="throwInternal",_DYN_SET_DF="setDf",_DYN_WATCH="watch",_DYN_LOGGER="logger",_DYN_APPLY="apply",_DYN_PUSH$1="push",_DYN_SPLICE="splice",_DYN_HDLR="hdlr",_DYN_CANCEL="cancel",_DYN_INITIALIZE="initialize",_DYN_IDENTIFIER="identifier",_DYN_IS_INITIALIZED="isInitialized",_DYN_GET_PLUGIN="getPlugin",_DYN_POLL_INTERNAL_LOGS="pollInternalLogs",_DYN_NAME$2="name",_DYN_TIME="time",_DYN_PROCESS_NEXT="processNext",_DYN_GET_PROCESS_TEL_CONT0="getProcessTelContext",_DYN_GET_NOTIFY_MGR="getNotifyMgr",_DYN_ADD_NOTIFICATION_LIS1="addNotificationListener",_DYN_REMOVE_NOTIFICATION_2="removeNotificationListener",_DYN_ENABLED="enabled",_DYN_STOP_POLLING_INTERNA3="stopPollingInternalLogs",_DYN_UNLOAD="unload",_DYN_ON_COMPLETE="onComplete",_DYN_VERSION="version",_DYN_LOGGING_LEVEL_CONSOL4="loggingLevelConsole",_DYN_CREATE_NEW$1="createNew",_DYN_TEARDOWN="teardown",_DYN_MESSAGE_ID="messageId",_DYN_MESSAGE$1="message",_DYN_IS_ASYNC="isAsync",_DYN_DIAG_LOG$1="diagLog",_DYN__DO_TEARDOWN="_doTeardown",_DYN_UPDATE="update",_DYN_GET_NEXT="getNext",_DYN_SET_NEXT_PLUGIN="setNextPlugin",_DYN_USER_AGENT="userAgent",_DYN_SPLIT$1="split",_DYN_NODE_TYPE="nodeType",_DYN_REPLACE="replace",_DYN_LOG_INTERNAL_MESSAGE="logInternalMessage",_DYN_TYPE="type",_DYN_HANDLER="handler",_DYN_IS_CHILD_EVT="isChildEvt",_DYN_GET_CTX="getCtx",_DYN_SET_CTX="setCtx",_DYN_COMPLETE="complete",_DYN_TRACE_ID$1="traceId",_DYN_SPAN_ID="spanId",_DYN_TRACE_FLAGS="traceFlags";function throwAggregationError(e,t){aggregationErrorType=aggregationErrorType||createCustomError("AggregationError",function(e,t){1<t[_DYN_LENGTH$2]&&(e.errors=t[1])});var n=e||"One or more errors occurred.";throw arrForEach(t,function(e,t){n+="\n".concat(t," > ").concat(dumpObj(e))}),new aggregationErrorType(n,t||[])}function doAwaitResponse(e,t){return doAwait(e,function(e){t&&t({value:e,rejected:!1})},function(e){t&&t({rejected:!0,reason:e})})}function doAwait(e,t,n,r){var o=e;return isPromiseLike(e)?(t||n)&&(o=e.then(t,n)):t&&t(e),r?doFinally(o,r):o}function doFinally(e,t){var n=e;return t&&(isPromiseLike(e)?n=e["finally"]?e["finally"](t):e.then(function(e){return t(),e},function(e){throw t(),e}):t()),n}var _hasInitEvent,STRING_STATES=["pending","resolving","resolved","rejected"],DISPATCH_EVENT="dispatchEvent";function emitEvent(e,t,n,r){var o=getDocument(),r=(_hasInitEvent=_hasInitEvent||safeGetLazy(function(){var e;return!!(e=o&&o.createEvent?o.createEvent("Event"):e)&&e.initEvent},null)).v?o.createEvent("Event"):r?new Event(t):{};n&&n(r),_hasInitEvent.v&&r.initEvent(t,!1,!0),r&&e[DISPATCH_EVENT]?e[DISPATCH_EVENT](r):(n=e["on"+t])?n(r):(e=getInst("console"))&&(e.error||e.log)(t,dumpObj(r))}var _hasPromiseRejectionEvent,STR_PROMISE="Promise",NODE_UNHANDLED_REJECTION="unhandledRejection",UNHANDLED_REJECTION=NODE_UNHANDLED_REJECTION.toLowerCase(),_unhandledRejectionTimeout=10;function dumpFnObj(e){return isFunction(e)?e.toString():dumpObj(e)}function _createPromise(e,t,n){var _,r=arrSlice(arguments,3),s=0,c=!1,u=[],o=!1,l=null,i=(_hasPromiseRejectionEvent=_hasPromiseRejectionEvent||lazySafeGetInst(STR_PROMISE+"RejectionEvent"),function(i,a){return o=!0,l&&l.cancel(),l=null,e(function(r,o){u.push(function(){try{var e=2===s?i:a,t=isUndefined(e)?_:isFunction(e)?e(_):e;isPromiseLike(t)?t.then(r,o):(e||3!==s?r:o)(t)}catch(n){o(n)}}),c&&N()},r)}),a=function(){return STRING_STATES[s]},N=function(){var e;0<u.length&&(e=u.slice(),u=[],o=!0,t(e),l&&l.cancel(),l=null)},E=function(t,n){return function(e){if(s===n){if(2===t&&isPromiseLike(e))return s=1,void e.then(E(2,1),E(3,1));s=t,c=!0,_=e,N(),o||3!==t||l||(l=scheduleTimeout(f,_unhandledRejectionTimeout))}}},f=function(){o||(isNode()?process.emit(NODE_UNHANDLED_REJECTION,_,D):emitEvent(getWindow()||getGlobal(),UNHANDLED_REJECTION,function(e){return objDefine(e,"promise",{g:function(){return D}}),e.reason=_,e},!!_hasPromiseRejectionEvent.v))},D={then:i,"catch":function(e){return i(undefined,e)},"finally":function(t){var e=t,n=t;return isFunction(t)&&(e=function(e){return t&&t(),e},n=function(e){throw t&&t(),e}),i(e,n)}},d=(objDefineProp(D,"state",{get:a}),hasSymbol()&&(D[getKnownSymbol(11)]="IPromise"),D.toString=function(){return"IPromise "+a()+(c?" - "+dumpFnObj(_):"")},isFunction(n)||throwTypeError(STR_PROMISE+": executor is not a function - "+dumpFnObj(n)),E(3,0));try{n.call(D,E(2,0),d)}catch(T){d(T)}return D}function _createAllPromise(n){return function(t){var e=arrSlice(arguments,1);return n(function(n,r){try{var o=[],i=1;arrForEach(t,function(e,t){e&&(i++,doAwait(e,function(e){o[t]=e,0==--i&&n(o)},r))}),0==--i&&n(o)}catch(e){r(e)}},e)}}var _isPromiseSupported,_promiseCreator,_processPendingItems=function(e){arrForEach(e,function(e){try{e()}catch(t){}})};function timeoutItemProcessor(e){var t=isNumber(e)?e:0;return function(e){scheduleTimeout(function(){_processPendingItems(e)},t)}}function createAsyncPromise(e,t){return _createPromise(createAsyncPromise,timeoutItemProcessor(t),e,t)}function createNativePromise(e,t){var n=(_isPromiseSupported=_isPromiseSupported||lazySafeGetInst(STR_PROMISE)).v;if(!n)return createAsyncPromise(e);isFunction(e)||throwTypeError(STR_PROMISE+": executor is not a function - "+dumpObj(e));var r=0,n=new n(function(t,n){e(function(e){r=2,t(e)},function(e){r=3,n(e)})});return objDefineProp(n,"state",{get:function(){return STRING_STATES[r]}}),n}function createPromise(e,t){return(_promiseCreator=_promiseCreator||getLazy(function(){return createNativePromise})).v.call(this,e,t)}var createAllPromise=_createAllPromise(createPromise),UNDEFINED_VALUE$1=undefined,STR_EMPTY="",STR_CHANNELS="channels",STR_CORE="core",STR_CREATE_PERF_MGR="createPerfMgr",STR_DISABLED="disabled",STR_EXTENSION_CONFIG="extensionConfig",STR_EXTENSIONS="extensions",STR_PROCESS_TELEMETRY="processTelemetry",STR_PRIORITY="priority",STR_EVENTS_SENT="eventsSent",STR_EVENTS_DISCARDED="eventsDiscarded",STR_EVENTS_SEND_REQUEST="eventsSendRequest",STR_PERF_EVENT="perfEvent",STR_GET_PERF_MGR="getPerfMgr",STR_DOMAIN="domain",STR_PATH="path",STR_NOT_DYNAMIC_ERROR="Not dynamic - ",rCamelCase=/-([a-z])/g,rNormalizeInvalid=/([^\w\d_$])/g,rLeadingNumeric=/^(\d+[\w\d_$])/;function isNotNullOrUndefined(e){return!isNullOrUndefined(e)}function normalizeJsName(e){return e&&isString(e)?(e=(e=e[_DYN_REPLACE](rCamelCase,function(e,t){return t.toUpperCase()}))[_DYN_REPLACE](rNormalizeInvalid,"_"))[_DYN_REPLACE](rLeadingNumeric,function(e,t){return"_"+t}):e}function strContains(e,t){return!(!e||!t)&&-1!==strIndexOf(e,t)}function toISOString(e){return e&&e.toISOString()||""}function getExceptionName(e){return isError(e)?e[_DYN_NAME$2]:STR_EMPTY}function setValue(e,t,n,r,o){var i=n;return!e||(i=e[t])===n||o&&!o(i)||r&&!r(n)||(e[t]=i=n),i}function getSetValue(e,t,n){var r;return e?!(r=e[t])&&isNullOrUndefined(r)&&(r=isUndefined(n)?{}:n,e[t]=r):r=isUndefined(n)?{}:n,r}function _createProxyFunction(e,t){var n=null,r=null;return isFunction(e)?n=e:r=e,function(){var e=arguments;if(r=n?n():r)return r[t][_DYN_APPLY](r,e)}}function proxyFunctionAs(e,t,n,r,o){e&&t&&n&&(!1===o&&!isUndefined(e[t])||(e[t]=_createProxyFunction(n,r)))}function proxyFunctions(t,n,e,r){return t&&n&&isObject(t)&&isArray(e)&&arrForEach(e,function(e){isString(e)&&proxyFunctionAs(t,e,n,e,r)}),t}function createClassFromInterface(e){return function(){var n=this;e&&objForEachKey(e,function(e,t){n[e]=t})}}function optimizeObject(e){return e&&objAssign?ObjClass(objAssign({},e)):e}function objExtend(e,t,n,r,o,i){var a=arguments,_=a[0]||{},s=a[_DYN_LENGTH$2],c=!1,u=1;for(0<s&&isBoolean(_)&&(c=_,_=a[u]||{},u++),isObject(_)||(_={});u<s;u++){var l,N,E,f,D=a[u],d=isArray(D),T=isObject(D);for(l in D)(d&&l in D||T&&objHasOwn(D,l))&&(N=D[l],E=void 0,c&&N&&((E=isArray(N))||isPlainObject(N))&&(f=_[l],E?isArray(f)||(f=[]):isPlainObject(f)||(f={}),N=objExtend(c,f,N)),N!==undefined&&(_[l]=N))}return _}var strDocumentMode="documentMode",strLocation="location",strConsole="console",strJSON="JSON",strCrypto="crypto",strMsCrypto="msCrypto",strMsie="msie",strTrident="trident/",strXMLHttpRequest="XMLHttpRequest",_isTrident=null,_navUserAgentCheck=null,_enableMocks=!1,_useXDomainRequest=null,_beaconsSupported=null;function _hasProperty(e,t){var n,r=!1;if(e){try{(r=t in e)||(n=e[strShimPrototype])&&(r=t in n)}catch(o){}if(!r)try{r=!isUndefined((new e)[t])}catch(o){}}return r}function getLocation(e){if(e&&_enableMocks){e=getInst("__mockLocation");if(e)return e}return typeof location===strShimObject&&location?location:getInst(strLocation)}function getConsole(){return typeof console!==strShimUndefined?console:getInst(strConsole)}function hasJSON(){return!!(typeof JSON===strShimObject&&JSON||null!==getInst(strJSON))}function getJSON(){return hasJSON()?JSON||getInst(strJSON):null}function getCrypto(){return getInst(strCrypto)}function getMsCrypto(){return getInst(strMsCrypto)}function isIE(){var e=getNavigator();return!e||e[_DYN_USER_AGENT]===_navUserAgentCheck&&null!==_isTrident||(e=((_navUserAgentCheck=e[_DYN_USER_AGENT])||STR_EMPTY)[_DYN_TO_LOWER_CASE$1](),_isTrident=strContains(e,strMsie)||strContains(e,strTrident)),_isTrident}function getIEVersion(e){var t=((e=(e=void 0===e?null:e)?e:(t=getNavigator()||{})?(t.userAgent||STR_EMPTY)[_DYN_TO_LOWER_CASE$1]():STR_EMPTY)||STR_EMPTY)[_DYN_TO_LOWER_CASE$1]();if(strContains(t,strMsie))return e=getDocument()||{},Math.max(parseInt(t[_DYN_SPLIT$1](strMsie)[1]),e[strDocumentMode]||0);if(strContains(t,strTrident)){e=parseInt(t[_DYN_SPLIT$1](strTrident)[1]);if(e)return e+4}return null}function isBeaconsSupported(e){return _beaconsSupported=null!==_beaconsSupported&&!1!==e?_beaconsSupported:hasNavigator()&&!!getNavigator().sendBeacon}function isFetchSupported(e){var t=!1;try{var t=!!getInst("fetch"),n=getInst("Request");t&&e&&n&&(t=_hasProperty(n,"keepalive"))}catch(r){}return t}function useXDomainRequest(){return _useXDomainRequest=null===_useXDomainRequest&&(_useXDomainRequest=typeof XDomainRequest!==strShimUndefined)&&isXhrSupported()?_useXDomainRequest&&!_hasProperty(getInst(strXMLHttpRequest),"withCredentials"):_useXDomainRequest}function isXhrSupported(){var e=!1;try{e=!!getInst(strXMLHttpRequest)}catch(t){}return e}var UInt32Mask=4294967296,MaxUInt32=4294967295,SEED1=123456789,SEED2=987654321,_mwcSeeded=!1,_mwcW=SEED1,_mwcZ=SEED2;function _mwcSeed(e){e<0&&(e>>>=0),_mwcW=SEED1+e&MaxUInt32,_mwcZ=SEED2-e&MaxUInt32,_mwcSeeded=!0}function _autoSeedMwc(){try{var e=2147483647&utcNow();_mwcSeed((Math.random()*UInt32Mask^e)+e)}catch(t){}}function random32(e){var t=0,n=getCrypto()||getMsCrypto();return 0===(t=n&&n.getRandomValues?n.getRandomValues(new Uint32Array(1))[0]&MaxUInt32:t)&&isIE()&&(_mwcSeeded||_autoSeedMwc(),t=mwcRandom32()&MaxUInt32),0===t&&(t=Math.floor(UInt32Mask*Math.random()|0)),e||(t>>>=0),t}function mwcRandom32(e){var t=((_mwcZ=36969*(65535&_mwcZ)+(_mwcZ>>16)&MaxUInt32)<<16)+(65535&(_mwcW=18e3*(65535&_mwcW)+(_mwcW>>16)&MaxUInt32))>>>0&MaxUInt32|0;return e||(t>>>=0),t}function newId(e){void 0===e&&(e=22);for(var t=random32()>>>0,n=0,r=STR_EMPTY;r[_DYN_LENGTH$2]<e;)r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[0|63&t]||"",t>>>=6,5==++n&&(t=(random32()<<2&4294967295|3&t)>>>0,n=0);return r}var version="3.0.4",instanceName="."+newId(6),_dataUid=0;function _canAcceptData(e){return 1===e[_DYN_NODE_TYPE]||9===e[_DYN_NODE_TYPE]||!+e[_DYN_NODE_TYPE]}function _getCache(e,t){var n=t[e.id];if(!n){n={};try{_canAcceptData(t)&&objDefine(t,e.id,{e:!1,v:n})}catch(r){}}return n}function createUniqueNamespace(e,t){return normalizeJsName(e+_dataUid+++((t=void 0!==t&&t)?"."+version:STR_EMPTY)+instanceName)}function createElmNodeData(e){var i={id:createUniqueNamespace("_aiData-"+(e||STR_EMPTY)+"."+version),accept:function(e){return _canAcceptData(e)},get:function(e,t,n,r){var o=e[i.id];return o?o[normalizeJsName(t)]:(r&&((o=_getCache(i,e))[normalizeJsName(t)]=n),n)},kill:function(e,t){if(e&&e[t])try{delete e[t]}catch(n){}}};return i}function _isConfigDefaults(e){return e&&isObject(e)&&(e.isVal||e.fb||objHasOwn(e,"v")||objHasOwn(e,"mrg")||objHasOwn(e,"ref")||e.set)}function _getDefault(e,t,n){var r,o=n.dfVal||isDefined;if(t&&n.fb){var i=n.fb;isArray(i)||(i=[i]);for(var a=0;a<i[_DYN_LENGTH$2];a++){var _=i[a],s=t[_];if(o(s)?r=s:e&&(o(s=e.cfg[_])&&(r=s),e.set(e.cfg,asString(_),s)),o(r))break}}return!o(r)&&o(n.v)?n.v:r}function _resolveDefaultValue(n,r,e){var o,t=e;return(t=e&&_isConfigDefaults(e)?_getDefault(n,r,e):t)&&(_isConfigDefaults(t)&&(t=_resolveDefaultValue(n,r,t)),isArray(t)?(o=[])[_DYN_LENGTH$2]=t[_DYN_LENGTH$2]:isPlainObject(t)&&(o={}),o&&(objForEachKey(t,function(e,t){t&&_isConfigDefaults(t)&&(t=_resolveDefaultValue(n,r,t)),o[e]=t}),t=o)),t}function _applyDefaultValue(n,e,t,r){var o,i,a,_,s,c,u=r,u=_isConfigDefaults(u)?(o=u.isVal,i=u.set,s=u[_DYN_RD_ONLY],l=u[_DYN_BLK_VAL],a=u.mrg,!(_=u.ref)&&isUndefined(_)&&(_=!!a),_getDefault(n,e,u)):r,r=(l&&n[_DYN_BLK_VAL](e,t),!0),l=e[t];!l&&isNullOrUndefined(l)||(c=l,r=!1,o&&c!==u&&!o(c)&&(c=u,r=!0),i&&(r=(c=i(c,u,e))===u)),r?c=u&&_resolveDefaultValue(n,e,u):(isPlainObject(c)||isArray(u))&&a&&u&&(isPlainObject(u)||isArray(u))&&objForEachKey(u,function(e,t){_applyDefaultValue(n,c,e,t)}),n.set(e,t,c),_&&n.ref(e,t),s&&n[_DYN_RD_ONLY](e,t)}var CFG_HANDLER_LINK=symbolFor("[[ai_dynCfg_1]]"),BLOCK_DYNAMIC=symbolFor("[[ai_blkDynCfg_1]]"),FORCE_DYNAMIC=symbolFor("[[ai_frcDynCfg_1]]");function _cfgDeepCopy(e){var n;return e&&(isArray(e)?(n=[])[_DYN_LENGTH$2]=e[_DYN_LENGTH$2]:isPlainObject(e)&&(n={}),n)?(objForEachKey(e,function(e,t){n[e]=_cfgDeepCopy(t)}),n):e}function getDynamicConfigHandler(e){if(e){var t=e[CFG_HANDLER_LINK]||e;if(t.cfg&&(t.cfg===e||t.cfg[CFG_HANDLER_LINK]===t))return t}return null}function blockDynamicConversion(e){if(e&&(isPlainObject(e)||isArray(e)))try{e[BLOCK_DYNAMIC]=!0}catch(t){}return e}function _canMakeDynamic(e,t,n){var r=!1;return!n||e[t.blkVal]||(r=n[FORCE_DYNAMIC])||n[BLOCK_DYNAMIC]?r:isPlainObject(n)||isArray(n)}function throwInvalidAccess(e){throwTypeError("InvalidAccess:"+e)}var arrayMethodsToPatch=["push","pop","shift","unshift","splice"],_throwDynamicError=function(e,t,n,r){e&&e[_DYN_THROW_INTERNAL](3,108,"".concat(n," [").concat(t,"] failed - ")+dumpObj(r))};function _patchArray(o,i,a){isArray(i)&&arrForEach(arrayMethodsToPatch,function(e){var r=i[e];i[e]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=r[_DYN_APPLY](this,e);return _makeDynamicObject(o,i,a,"Patching"),n}})}function _getOwnPropGetter(e,t){e=objGetOwnPropertyDescriptor(e,t);return e&&e.get}function _createDynamicProperty(o,i,a,_){var s={n:a,h:[],trk:function(e){e&&e.fn&&(-1===arrIndexOf(s.h,e)&&s.h[_DYN_PUSH$1](e),o.trk(e,s))},clr:function(e){e=arrIndexOf(s.h,e);-1!==e&&s.h[_DYN_SPLICE](e,1)}},c=!0,u=!1;function l(){c&&(u=u||_canMakeDynamic(l,o,_),_&&!_[CFG_HANDLER_LINK]&&u&&(_=_makeDynamicObject(o,_,a,"Converting")),c=!1);var e=o.act;return e&&s.trk(e),_}l[o.prop]={chng:function(){o.add(s)}},objDefine(i,s.n,{g:l,s:function(t){if(_!==t){l[o.ro]&&!o.upd&&throwInvalidAccess("["+a+"] is read-only:"+dumpObj(i)),c&&(u=u||_canMakeDynamic(l,o,_),c=!1);var e,n=u&&l[o.rf];if(u)if(n){objForEachKey(_,function(e){_[e]=t?t[e]:UNDEFINED_VALUE$1});try{objForEachKey(t,function(e,t){_setDynamicProperty(o,_,e,t)}),t=_}catch(r){_throwDynamicError((o.hdlr||{})[_DYN_LOGGER],a,"Assigning",r),u=!1}}else _&&_[CFG_HANDLER_LINK]&&objForEachKey(_,function(e){var e=_getOwnPropGetter(_,e);e&&(e=e[o.prop])&&e.chng()});t!==_&&(e=t&&_canMakeDynamic(l,o,t),!n&&e&&(t=_makeDynamicObject(o,t,a,"Converting")),_=t,u=e),o.add(s)}}})}function _setDynamicProperty(e,t,n,r){var o;return t&&((o=_getOwnPropGetter(t,n))&&o[e.prop]?t[n]=r:_createDynamicProperty(e,t,n,r)),t}function _setDynamicPropertyState(e,t,n,r){if(t){var o=_getOwnPropGetter(t,n),i=o&&!!o[e.prop],a=r&&r[0],_=r&&r[1],r=r&&r[2];if(!i){if(r)try{blockDynamicConversion(t)}catch(s){_throwDynamicError((e.hdlr||{})[_DYN_LOGGER],n,"Blocking",s)}try{_setDynamicProperty(e,t,n,t[n]),o=_getOwnPropGetter(t,n)}catch(s){_throwDynamicError((e.hdlr||{})[_DYN_LOGGER],n,"State",s)}}a&&(o[e.rf]=a),_&&(o[e.ro]=_),r&&(o[e.blkVal]=!0)}return t}function _makeDynamicObject(n,r,e,t){try{objForEachKey(r,function(e,t){_setDynamicProperty(n,r,e,t)}),r[CFG_HANDLER_LINK]||(objDefineProp(r,CFG_HANDLER_LINK,{get:function(){return n[_DYN_HDLR]}}),_patchArray(n,r,e))}catch(o){_throwDynamicError((n.hdlr||{})[_DYN_LOGGER],e,t,o)}return r}var symPrefix="[[ai_",symPostfix="]]";function _createState(i){var a,e=newSymbol(symPrefix+"get"+i.uid+symPostfix),t=newSymbol(symPrefix+"ro"+i.uid+symPostfix),n=newSymbol(symPrefix+"rf"+i.uid+symPostfix),r=newSymbol(symPrefix+"blkVal"+i.uid+symPostfix),_=newSymbol(symPrefix+"dtl"+i.uid+symPostfix),o=null,s=null;function c(t,e){var n=a.act;try{(a.act=t)&&t[_]&&(arrForEach(t[_],function(e){e.clr(t)}),t[_]=[]),e({cfg:i.cfg,set:i.set.bind(i),setDf:i[_DYN_SET_DF].bind(i),ref:i.ref.bind(i),rdOnly:i[_DYN_RD_ONLY].bind(i)})}catch(o){var r=i[_DYN_LOGGER];throw r&&r[_DYN_THROW_INTERNAL](1,107,dumpObj(o)),o}finally{a.act=n||null}}function u(){if(o){var e=o,n=(o=null,s&&s[_DYN_CANCEL](),s=null,[]);if(arrForEach(e,function(t){if(t&&(t[_]&&(arrForEach(t[_],function(e){e.clr(t)}),t[_]=null),t.fn))try{c(t,t.fn)}catch(e){n[_DYN_PUSH$1](e)}}),o)try{u()}catch(t){n[_DYN_PUSH$1](t)}0<n[_DYN_LENGTH$2]&&throwAggregationError("Watcher error(s): ",n)}}return(e={prop:e,ro:t,rf:n})[_DYN_BLK_VAL]=r,e[_DYN_HDLR]=i,e.add=function(e){if(e&&0<e.h[_DYN_LENGTH$2]){o=o||[],s=s||scheduleTimeout(function(){s=null,u()},0);for(var t=0;t<e.h[_DYN_LENGTH$2];t++){var n=e.h[t];n&&-1===arrIndexOf(o,n)&&o[_DYN_PUSH$1](n)}}},e[_DYN_NOTIFY]=u,e.use=c,e.trk=function(e,t){e&&(e=e[_]=e[_]||[],-1===arrIndexOf(e,t)&&e[_DYN_PUSH$1](t))},a=e}function _createAndUseHandler(e,t){var n={fn:t,rm:function(){n.fn=null,t=e=null}};return e.use(n,t),n}function _createDynamicHandler(o,e,t){var n=getDynamicConfigHandler(e);if(n)return n;var i,n=createUniqueNamespace("dyncfg",!0),t=e&&!1!==t?e:_cfgDeepCopy(e),r=((e={uid:null,cfg:t})[_DYN_LOGGER]=o,e[_DYN_NOTIFY]=function(){i[_DYN_NOTIFY]()},e.set=function(e,t,n){try{e=_setDynamicProperty(i,e,t,n)}catch(r){_throwDynamicError(o,t,"Setting value",r)}return e[t]},e[_DYN_SET_DF]=function(n,e){return e&&objForEachKey(e,function(e,t){_applyDefaultValue(r,n,e,t)}),n},e[_DYN_WATCH]=function(e){return _createAndUseHandler(i,e)},e.ref=function(e,t){return _setDynamicPropertyState(i,e,t,((e={})[0]=!0,e))[t]},e[_DYN_RD_ONLY]=function(e,t){return _setDynamicPropertyState(i,e,t,((e={})[1]=!0,e))[t]},e[_DYN_BLK_VAL]=function(e,t){return _setDynamicPropertyState(i,e,t,((e={})[2]=!0,e))[t]},e._block=function(n,r){i.use(null,function(e){var t=i.upd;try{isUndefined(r)||(i.upd=r),n(e)}finally{i.upd=t}})},e);return objDefine(r,"uid",{c:!1,e:!1,w:!1,v:n}),_makeDynamicObject(i=_createState(r),t,"config","Creating"),r}function _logInvalidAccess(e,t){e?(e[_DYN_WARN_TO_CONSOLE](t),e[_DYN_THROW_INTERNAL](2,108,t)):throwInvalidAccess(t)}function createDynamicConfig(e,t,n,r){n=_createDynamicHandler(n,e||{},r);return t&&n[_DYN_SET_DF](n.cfg,t),n}function onConfigChange(e,t,n){var r=e[CFG_HANDLER_LINK]||e;return!r.cfg||r.cfg!==e&&r.cfg[CFG_HANDLER_LINK]!==r?(_logInvalidAccess(n,STR_NOT_DYNAMIC_ERROR+dumpObj(e)),createDynamicConfig(e,null,n)[_DYN_WATCH](t)):r[_DYN_WATCH](t)}function runTargetUnload(e,t){if(e&&e[_DYN_UNLOAD])return e[_DYN_UNLOAD](t)}function doUnloadAll(e,t,n){var r;return n||(r=createPromise(function(e){n=e})),e&&0<getLength(e)?doAwaitResponse(runTargetUnload(e[0],t),function(){doUnloadAll(arrSlice(e,1),t,n)}):n(),r}var ChannelControllerPriority=500;function _stringToBoolOrDefault(e,t,n){return!e&&isNullOrUndefined(e)?t:isBoolean(e)?e:"true"===asString(e)[_DYN_TO_LOWER_CASE$1]()}function cfgDfMerge(e){return{mrg:!0,v:e}}function cfgDfValidate(e,t,n){return{fb:n,isVal:e,v:t}}function cfgDfBoolean(e,t){return{fb:t,set:_stringToBoolOrDefault,v:!!e}}var _debugListener,_a$4,listenerFuncs=[STR_EVENTS_SENT,STR_EVENTS_DISCARDED,STR_EVENTS_SEND_REQUEST,STR_PERF_EVENT],_aiNamespace=null;function _listenerProxyFunc(n,r){return function(){var e=arguments,t=getDebugExt(r);t&&(t=t.listener)&&t[n]&&t[n][_DYN_APPLY](t,e)}}function _getExtensionNamespace(){var e=getInst("Microsoft");return _aiNamespace=e?e.ApplicationInsights:_aiNamespace}function getDebugExt(e){var t=_aiNamespace;return(t=t||!0===e.disableDbgExt?t:_aiNamespace||_getExtensionNamespace())?t.ChromeDbgExt:null}function getDebugListener(e){if(!_debugListener){_debugListener={};for(var t=0;t<listenerFuncs[_DYN_LENGTH$2];t++)_debugListener[listenerFuncs[t]]=_listenerProxyFunc(listenerFuncs[t],e)}return _debugListener}var STR_WARN_TO_CONSOLE="warnToConsole",AiNonUserActionablePrefix="AI (Internal): ",AiUserActionablePrefix="AI: ",AIInternalMessagePrefix="AITR_",defaultValues$2={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},_logFuncs=((_a$4={})[0]=null,_a$4[1]="errorToConsole",_a$4[2]=STR_WARN_TO_CONSOLE,_a$4[3]="debugToConsole",_a$4);function _sanitizeDiagnosticText(e){return e?'"'+e[_DYN_REPLACE](/\"/g,STR_EMPTY)+'"':STR_EMPTY}function _logToConsole(e,t){var n,r=getConsole();r&&(n="log",r[e]&&(n=e),isFunction(r[n])&&r[n](t))}var _InternalLogMessage=function(){function e(e,t,n,r){void 0===n&&(n=!1),this[_DYN_MESSAGE_ID]=e,this[_DYN_MESSAGE$1]=(n?AiUserActionablePrefix:AiNonUserActionablePrefix)+e;n=STR_EMPTY,hasJSON()&&(n=getJSON().stringify(r)),e=(t?" message:"+_sanitizeDiagnosticText(t):STR_EMPTY)+(r?" props:"+_sanitizeDiagnosticText(n):STR_EMPTY);this[_DYN_MESSAGE$1]+=e}return e.dataType="MessageData",e}();function safeGetLogger(e,t){return(e||{})[_DYN_LOGGER]||new DiagnosticLogger(t)}var _a$3,_b$1,DiagnosticLogger=function(){function e(r){this.identifier="DiagnosticLogger",this.queue=[];var s,o,c,u,t,l=0,N={};dynamicProto(e,this,function(i){function a(e,t){var n,r;c<=l||(r=!0,n=AIInternalMessagePrefix+t[_DYN_MESSAGE_ID],N[n]?r=!1:N[n]=!0,r&&(e<=o&&(i.queue[_DYN_PUSH$1](t),l++,_(1===e?"error":"warn",t)),l===c&&(r=new _InternalLogMessage(23,n="Internal events throttle limit per PageView reached for this app.",!1),i.queue[_DYN_PUSH$1](r),1===e?i.errorToConsole(n):i[_DYN_WARN_TO_CONSOLE](n))))}function _(e,t){var n=getDebugExt(r||{});n&&n[_DYN_DIAG_LOG$1]&&n[_DYN_DIAG_LOG$1](e,t)}t=onConfigChange(createDynamicConfig(r||{},defaultValues$2,i).cfg,function(e){e=e.cfg;s=e[_DYN_LOGGING_LEVEL_CONSOL4],o=e.loggingLevelTelemetry,c=e.maxMessageLimit,u=e.enableDebug}),i.consoleLoggingLevel=function(){return s},i[_DYN_THROW_INTERNAL]=function(e,t,n,r,o){t=new _InternalLogMessage(t,n,o=void 0!==o&&o,r);if(u)throw dumpObj(t);n=_logFuncs[e]||STR_WARN_TO_CONSOLE;isUndefined(t[_DYN_MESSAGE$1])?_("throw"+(1===e?"Critical":"Warning"),t):(o?(r=+t[_DYN_MESSAGE_ID],!N[r]&&e<=s&&(i[n](t[_DYN_MESSAGE$1]),N[r]=!0)):e<=s&&i[n](t[_DYN_MESSAGE$1]),a(e,t))},i.debugToConsole=function(e){_logToConsole("debug",e),_("warning",e)},i[_DYN_WARN_TO_CONSOLE]=function(e){_logToConsole("warn",e),_("warning",e)},i.errorToConsole=function(e){_logToConsole("error",e),_("error",e)},i.resetInternalMessageCount=function(){l=0,N={}},i[_DYN_LOG_INTERNAL_MESSAGE]=a,i[_DYN_UNLOAD]=function(e){t&&t.rm(),t=null}})}return e.__ieDyn=1,e}();function _getLogger(e){return e||new DiagnosticLogger}function _throwInternal(e,t,n,r,o,i){void 0===i&&(i=!1),_getLogger(e)[_DYN_THROW_INTERNAL](t,n,r,o,i)}function _warnToConsole(e,t){_getLogger(e)[_DYN_WARN_TO_CONSOLE](t)}var _doc,strToGMTString="toGMTString",strToUTCString="toUTCString",strCookie="cookie",strExpires="expires",strIsCookieUseDisabled="isCookieUseDisabled",strDisableCookiesUsage="disableCookiesUsage",strConfigCookieMgr="_ckMgr",_supportsCookies=null,_allowUaSameSite=null,_parsedCookieValue=null,_cookieCache={},_globalCookieConfig={},rootDefaultConfig=((_a$3={cookieCfg:cfgDfMerge(((_b$1={})[STR_DOMAIN]={fb:"cookieDomain",dfVal:isNotNullOrUndefined},_b$1.path={fb:"cookiePath",dfVal:isNotNullOrUndefined},_b$1.enabled=UNDEFINED_VALUE$1,_b$1.ignoreCookies=UNDEFINED_VALUE$1,_b$1.blockedCookies=UNDEFINED_VALUE$1,_b$1)),cookieDomain:UNDEFINED_VALUE$1,cookiePath:UNDEFINED_VALUE$1})[strDisableCookiesUsage]=UNDEFINED_VALUE$1,_a$3);function _getDoc(){_doc=_doc||getLazy(function(){return getDocument()})}function _isMgrEnabled(e){return!e||e.isEnabled()}function _isIgnoredCookie(e,t){return!!(t&&e&&isArray(e.ignoreCookies))&&-1!==arrIndexOf(e.ignoreCookies,t)}function _isBlockedCookie(e,t){return!!(t&&e&&isArray(e.blockedCookies)&&-1!==arrIndexOf(e.blockedCookies,t))||_isIgnoredCookie(e,t)}function _isCfgEnabled(e,t){var n,t=t[_DYN_ENABLED];return isNullOrUndefined(t)&&(n=void 0,isUndefined(e[strIsCookieUseDisabled])||(n=!e[strIsCookieUseDisabled]),t=n=isUndefined(e[strDisableCookiesUsage])?n:!e[strDisableCookiesUsage]),t}function createCookieMgr(n,o){n=createDynamicConfig(n||_globalCookieConfig,null,o).cfg,t=onConfigChange(n,function(e){e[_DYN_SET_DF](e.cfg,rootDefaultConfig),c=e.ref(e.cfg,"cookieCfg"),u=c[STR_PATH]||"/",l=c[STR_DOMAIN],r=!1!==_isCfgEnabled(n,c),i=c.getCookie||_getCookieValue,N=c.setCookie||_setCookieValue,a=c.delCookie||_setCookieValue},o),(e={isEnabled:function(){var e=!1!==_isCfgEnabled(n,c)&&r&&areCookiesSupported(o),t=_globalCookieConfig[strConfigCookieMgr];return e&&t&&E!==t?_isMgrEnabled(t):e},setEnabled:function(e){r=!1!==e,c[_DYN_ENABLED]=e},set:function(e,t,n,r,o){var i,a,_,s=!1;return _isMgrEnabled(E)&&!_isBlockedCookie(c,e)&&(i={},a=strTrim(t||STR_EMPTY),-1!==(_=strIndexOf(a,";"))&&(a=strTrim(strLeft(t,_)),i=_extractParts(strSubstring(t,_+1))),setValue(i,STR_DOMAIN,r||l,isTruthy,isUndefined),isNullOrUndefined(n)||(t=isIE(),isUndefined(i[strExpires])&&0<(_=utcNow()+1e3*n)&&((r=new Date).setTime(_),setValue(i,strExpires,_formatDate(r,t?strToGMTString:strToUTCString)||_formatDate(r,t?strToGMTString:strToUTCString)||STR_EMPTY,isTruthy)),t||setValue(i,"max-age",STR_EMPTY+n,null,isUndefined)),(_=getLocation())&&"https:"===_.protocol&&(setValue(i,"secure",null,null,isUndefined),(_allowUaSameSite=null===_allowUaSameSite?!uaDisallowsSameSiteNone((getNavigator()||{})[_DYN_USER_AGENT]):_allowUaSameSite)&&setValue(i,"SameSite","None",null,isUndefined)),setValue(i,STR_PATH,o||u,null,isUndefined),N(e,_formatCookieValue(a,i)),s=!0),s},get:function(e){var t=STR_EMPTY;return _isMgrEnabled(E)&&!_isIgnoredCookie(c,e)?i(e):t},del:function(e,t){return!!_isMgrEnabled(E)&&E.purge(e,t)},purge:function(e,t){var n,r=!1;return areCookiesSupported(o)&&((n={})[STR_PATH]=t||"/",n[strExpires]="Thu, 01 Jan 1970 00:00:01 GMT",t=n,isIE()||(t["max-age"]="0"),a(e,_formatCookieValue(STR_EMPTY,t)),r=!0),r}})[_DYN_UNLOAD]=function(e){t&&t.rm(),t=null};var e,c,u,l,t,r,i,N,a,E=e;return E[strConfigCookieMgr]=E}function areCookiesSupported(e){if(null===_supportsCookies){_supportsCookies=!1,_doc||_getDoc();try{var t=_doc.v||{};_supportsCookies=t[strCookie]!==undefined}catch(n){_throwInternal(e,2,68,"Cannot access document.cookie - "+getExceptionName(n),{exception:dumpObj(n)})}}return _supportsCookies}function _extractParts(e){var n={};return e&&e[_DYN_LENGTH$2]&&arrForEach(strTrim(e)[_DYN_SPLIT$1](";"),function(e){var t;(e=strTrim(e||STR_EMPTY))&&(-1===(t=strIndexOf(e,"="))?n[e]=null:n[strTrim(strLeft(e,t))]=strTrim(strSubstring(e,t+1)))}),n}function _formatDate(e,t){return isFunction(e[t])?e[t]():null}function _formatCookieValue(e,t){var n=e||STR_EMPTY;return objForEachKey(t,function(e,t){n+="; "+e+(isNullOrUndefined(t)?STR_EMPTY:"="+t)}),n}function _getCookieValue(e){var t,n=STR_EMPTY;return _doc||_getDoc(),_doc.v&&(t=_doc.v[strCookie]||STR_EMPTY,_parsedCookieValue!==t&&(_cookieCache=_extractParts(t),_parsedCookieValue=t),n=strTrim(_cookieCache[e]||STR_EMPTY)),n}function _setCookieValue(e,t){_doc||_getDoc(),_doc.v&&(_doc.v[strCookie]=e+"="+t)}function uaDisallowsSameSiteNone(e){return!(!isString(e)||!strContains(e,"CPU iPhone OS 12")&&!strContains(e,"iPad; CPU OS 12")&&!(strContains(e,"Macintosh; Intel Mac OS X 10_14")&&strContains(e,"Version/")&&strContains(e,"Safari"))&&(!strContains(e,"Macintosh; Intel Mac OS X 10_14")||!strEndsWith(e,"AppleWebKit/605.1.15 (KHTML, like Gecko)"))&&!strContains(e,"Chrome/5")&&!strContains(e,"Chrome/6")&&(!strContains(e,"UnrealEngine")||strContains(e,"Chrome"))&&!strContains(e,"UCBrowser/12")&&!strContains(e,"UCBrowser/11"))}var defaultValues$1={perfEvtsSendAll:!1};function _runListeners(e,n,r,o){arrForEach(e,function(e){if(e&&e[n])if(r)scheduleTimeout(function(){return o(e)},0);else try{o(e)}catch(t){}})}var NotificationManager=function(){function t(e){this.listeners=[];var n,o=[],i=createDynamicConfig(e,defaultValues$1)[_DYN_WATCH](function(e){n=!!e.cfg.perfEvtsSendAll});dynamicProto(t,this,function(e){objDefine(e,"listeners",{g:function(){return o}}),e[_DYN_ADD_NOTIFICATION_LIS1]=function(e){o[_DYN_PUSH$1](e)},e[_DYN_REMOVE_NOTIFICATION_2]=function(e){for(var t=arrIndexOf(o,e);-1<t;)o[_DYN_SPLICE](t,1),t=arrIndexOf(o,e)},e[STR_EVENTS_SENT]=function(t){_runListeners(o,STR_EVENTS_SENT,!0,function(e){e[STR_EVENTS_SENT](t)})},e[STR_EVENTS_DISCARDED]=function(t,n){_runListeners(o,STR_EVENTS_DISCARDED,!0,function(e){e[STR_EVENTS_DISCARDED](t,n)})},e[STR_EVENTS_SEND_REQUEST]=function(t,n){_runListeners(o,STR_EVENTS_SEND_REQUEST,n,function(e){e[STR_EVENTS_SEND_REQUEST](t,n)})},e[STR_PERF_EVENT]=function(t){!t||!n&&t[_DYN_IS_CHILD_EVT]()||_runListeners(o,STR_PERF_EVENT,!1,function(e){t[_DYN_IS_ASYNC]?scheduleTimeout(function(){return e[STR_PERF_EVENT](t)},0):e[STR_PERF_EVENT](t)})},e[_DYN_UNLOAD]=function(t){var n,r=function(){i&&i.rm(),i=null,o=[]};if(_runListeners(o,"unload",!1,function(e){e=e[_DYN_UNLOAD](t);e&&(n=n||[])[_DYN_PUSH$1](e)}),n)return createPromise(function(e){return doAwaitResponse(createAllPromise(n),function(){r(),e()})});r()}})}return t.__ieDyn=1,t}(),strExecutionContextKey="ctx",strParentContextKey="ParentContextKey",strChildrenContextKey="ChildrenContextKey",_defaultPerfManager=null,PerfEvent=function(){function i(e,t,n){var r,o=this;o.start=utcNow(),o[_DYN_NAME$2]=e,o[_DYN_IS_ASYNC]=n,o[_DYN_IS_CHILD_EVT]=function(){return!1},isFunction(t)&&objDefine(o,"payload",{g:function(){return!r&&isFunction(t)&&(r=t(),t=null),r}}),o[_DYN_GET_CTX]=function(e){return e?(e===i[strParentContextKey]||e===i[strChildrenContextKey]?o:o[strExecutionContextKey]||{})[e]:null},o[_DYN_SET_CTX]=function(e,t){e&&(e===i[strParentContextKey]?(o[e]||(o[_DYN_IS_CHILD_EVT]=function(){return!0}),o[e]=t):e===i[strChildrenContextKey]?o[e]=t:(o[strExecutionContextKey]=o[strExecutionContextKey]||{})[e]=t)},o[_DYN_COMPLETE]=function(){var e=0,t=o[_DYN_GET_CTX](i[strChildrenContextKey]);if(isArray(t))for(var n=0;n<t[_DYN_LENGTH$2];n++){var r=t[n];r&&(e+=r[_DYN_TIME])}o[_DYN_TIME]=utcNow()-o.start,o.exTime=o[_DYN_TIME]-e,o[_DYN_COMPLETE]=function(){}}}return i.ParentContextKey="parent",i.ChildrenContextKey="childEvts",i}(),PerfManager=function(){function e(t){this.ctx={},dynamicProto(e,this,function(n){n.create=function(e,t,n){return new PerfEvent(e,t,n)},n.fire=function(e){e&&(e[_DYN_COMPLETE](),t&&isFunction(t[STR_PERF_EVENT])&&t[STR_PERF_EVENT](e))},n[_DYN_SET_CTX]=function(e,t){e&&((n[strExecutionContextKey]=n[strExecutionContextKey]||{})[e]=t)},n[_DYN_GET_CTX]=function(e){return(n[strExecutionContextKey]||{})[e]}})}return e.__ieDyn=1,e}(),doPerfActiveKey="CoreUtils.doPerf";function doPerf(e,t,n,r,o){if(e)if(e=e[STR_GET_PERF_MGR]?e[STR_GET_PERF_MGR]():e){var i,a=void 0,_=e[_DYN_GET_CTX](doPerfActiveKey);try{if(a=e.create(t(),r,o))return _&&a[_DYN_SET_CTX]&&(a[_DYN_SET_CTX](PerfEvent[strParentContextKey],_),_[_DYN_GET_CTX]&&_[_DYN_SET_CTX]&&((i=_[_DYN_GET_CTX](PerfEvent[strChildrenContextKey]))||(i=[],_[_DYN_SET_CTX](PerfEvent[strChildrenContextKey],i)),i[_DYN_PUSH$1](a))),e[_DYN_SET_CTX](doPerfActiveKey,a),n(a)}catch(s){a&&a[_DYN_SET_CTX]&&a[_DYN_SET_CTX]("exception",s)}finally{a&&e.fire(a),e[_DYN_SET_CTX](doPerfActiveKey,_)}}return n()}function getGblPerfMgr(){return _defaultPerfManager}var INVALID_TRACE_ID="00000000000000000000000000000000",INVALID_SPAN_ID="0000000000000000";function _isValid(e,t,n){return!(!e||e[_DYN_LENGTH$2]!==t||e===n||!e.match(/^[\da-f]*$/i))}function isValidTraceId(e){return _isValid(e,32,INVALID_TRACE_ID)}function isValidSpanId(e){return _isValid(e,16,INVALID_SPAN_ID)}var pluginStateData=createElmNodeData("plugin");function _getPluginState(e){return pluginStateData.get(e,"state",{},!0)}function initializePlugins(n,r){for(var e=[],t=null,o=n[_DYN_GET_NEXT]();o;){var i,a,_=o[_DYN_GET_PLUGIN]();_&&(t&&t[_DYN_SET_NEXT_PLUGIN]&&_[STR_PROCESS_TELEMETRY]&&t[_DYN_SET_NEXT_PLUGIN](_),a=!!(i=_getPluginState(_))[_DYN_IS_INITIALIZED],(a=_[_DYN_IS_INITIALIZED]?_[_DYN_IS_INITIALIZED]():a)||e[_DYN_PUSH$1](_),t=_,o=o[_DYN_GET_NEXT]())}arrForEach(e,function(e){var t=n[STR_CORE]();e[_DYN_INITIALIZE](n.getCfg(),t,r,n[_DYN_GET_NEXT]()),i=_getPluginState(e),e[STR_CORE]||i[STR_CORE]||(i[STR_CORE]=t),i[_DYN_IS_INITIALIZED]=!0,delete i[_DYN_TEARDOWN]})}function sortPlugins(e){return e.sort(function(e,t){var n,r=0;return t?(n=t[STR_PROCESS_TELEMETRY],e[STR_PROCESS_TELEMETRY]?r=n?e[STR_PRIORITY]-t[STR_PRIORITY]:1:n&&(r=-1)):r=e?1:-1,r})}function createDistributedTraceContext(t){var n={};return{getName:function(){return n[_DYN_NAME$2]},setName:function(e){t&&t.setName(e),n[_DYN_NAME$2]=e},getTraceId:function(){return n[_DYN_TRACE_ID$1]},setTraceId:function(e){t&&t.setTraceId(e),isValidTraceId(e)&&(n[_DYN_TRACE_ID$1]=e)},getSpanId:function(){return n[_DYN_SPAN_ID]},setSpanId:function(e){t&&t.setSpanId(e),isValidSpanId(e)&&(n[_DYN_SPAN_ID]=e)},getTraceFlags:function(){return n[_DYN_TRACE_FLAGS]},setTraceFlags:function(e){t&&t.setTraceFlags(e),n[_DYN_TRACE_FLAGS]=e}}}var _a$2,strTelemetryPluginChain="TelemetryPluginChain",strHasRunFlags="_hasRun",strGetTelCtx="_getTelCtx",_chainId=0;function _getNextProxyStart(e,t,n){for(;e;){if(e[_DYN_GET_PLUGIN]()===n)return e;e=e[_DYN_GET_NEXT]()}return createTelemetryProxyChain([n],t.config||{},t)}function _createInternalContext(e,i,n,t){var r=null,o=[],a=(i=i||createDynamicConfig({},null,n[_DYN_LOGGER]),null!==t&&(r=t?_getNextProxyStart(e,n,t):e),{_next:function(){var e,t=r;return r=t?t[_DYN_GET_NEXT]():null,t||(e=o)&&0<e[_DYN_LENGTH$2]&&(arrForEach(e,function(e){try{e.func.call(e.self,e.args)}catch(t){_throwInternal(n[_DYN_LOGGER],2,73,"Unexpected Exception during onComplete - "+dumpObj(t))}}),o=[]),t},ctx:{core:function(){return n},diagLog:function(){return safeGetLogger(n,i.cfg)},getCfg:function(){return i.cfg},getExtCfg:function(e,t){var r=_(e,!0);return t&&objForEachKey(t,function(e,t){var n;!isNullOrUndefined(r[e])||!(n=i.cfg[e])&&isNullOrUndefined(n)||(r[e]=n),_applyDefaultValue(i,r,e,t)}),i[_DYN_SET_DF](r,t)},getConfig:function(e,t,n){void 0===n&&(n=!1);var r,e=_(e,!1),o=i.cfg;return!e||!e[t]&&isNullOrUndefined(e[t])?!o[t]&&isNullOrUndefined(o[t])||(r=o[t]):r=e[t],r||!isNullOrUndefined(r)?r:n},hasNext:function(){return!!r},getNext:function(){return r},setNext:function(e){r=e},iterate:function(e){for(;t=a._next();){var t=t[_DYN_GET_PLUGIN]();t&&e(t)}},onComplete:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];e&&o[_DYN_PUSH$1]({func:e,self:isUndefined(t)?a.ctx:t,args:n})}}});function _(e,t){var n,r=null,o=i.cfg;return o&&e&&(n=o[STR_EXTENSION_CONFIG],o[STR_EXTENSION_CONFIG]=n=!n&&t?{}:n,(n=i.ref(o,STR_EXTENSION_CONFIG))&&(r=n[e],n[e]=r=!r&&t?{}:r,r=i.ref(n,e))),r}return a}function createProcessTelemetryContext(e,t,n,r){var o=createDynamicConfig(t),i=_createInternalContext(e,o,n,r),a=i.ctx;return a[_DYN_PROCESS_NEXT]=function(e){var t=i._next();return t&&t[STR_PROCESS_TELEMETRY](e,a),!t},a[_DYN_CREATE_NEW$1]=function(e,t){return createProcessTelemetryContext((e=isArray(e=void 0===e?null:e)?createTelemetryProxyChain(e,o.cfg,n,t):e)||a[_DYN_GET_NEXT](),o.cfg,n,t)},a}function createProcessTelemetryUnloadContext(e,n,t){var r=createDynamicConfig(n.config),o=_createInternalContext(e,r,n,t),i=o.ctx;return i[_DYN_PROCESS_NEXT]=function(e){var t=o._next();return t&&t[_DYN_UNLOAD](i,e),!t},i[_DYN_CREATE_NEW$1]=function(e,t){return createProcessTelemetryUnloadContext((e=isArray(e=void 0===e?null:e)?createTelemetryProxyChain(e,r.cfg,n,t):e)||i[_DYN_GET_NEXT](),n,t)},i}function createProcessTelemetryUpdateContext(e,n,t){var r=createDynamicConfig(n.config),o=_createInternalContext(e,r,n,t).ctx;return o[_DYN_PROCESS_NEXT]=function(t){return o.iterate(function(e){isFunction(e[_DYN_UPDATE])&&e[_DYN_UPDATE](o,t)})},o[_DYN_CREATE_NEW$1]=function(e,t){return createProcessTelemetryUpdateContext((e=isArray(e=void 0===e?null:e)?createTelemetryProxyChain(e,r.cfg,n,t):e)||o[_DYN_GET_NEXT](),n,t)},o}function createTelemetryProxyChain(e,t,n,r){var o,i=null,a=!r;return isArray(e)&&0<e[_DYN_LENGTH$2]&&(o=null,arrForEach(e,function(e){(a=!a&&r===e||a)&&e&&isFunction(e[STR_PROCESS_TELEMETRY])&&(e=createTelemetryPluginProxy(e,t,n),i=i||e,o&&o._setNext(e),o=e)})),r&&!i?createTelemetryProxyChain([r],t,n):i}function createTelemetryPluginProxy(s,r,o){var c=null,i=isFunction(s[STR_PROCESS_TELEMETRY]),a=isFunction(s[_DYN_SET_NEXT_PLUGIN]),u=s?s[_DYN_IDENTIFIER]+"-"+s[STR_PRIORITY]+"-"+_chainId++:"Unknown-0-"+_chainId++,_={getPlugin:function(){return s},getNext:function(){return c},processTelemetry:function(n,e){var t;l(e=e||(t=(t=s&&isFunction(s[strGetTelCtx])?s[strGetTelCtx]():t)||createProcessTelemetryContext(_,r,o)),function(e){if(!s||!i)return!1;var t=_getPluginState(s);return!t[_DYN_TEARDOWN]&&!t[STR_DISABLED]&&(a&&s[_DYN_SET_NEXT_PLUGIN](c),s[STR_PROCESS_TELEMETRY](n,e),!0)},"processTelemetry",function(){return{item:n}},!n.sync)||e[_DYN_PROCESS_NEXT](n)},unload:function(r,o){l(r,function(){var e,t,n=!1;return s&&(e=_getPluginState(s),t=s[STR_CORE]||e[STR_CORE],!s||t&&t!==r.core()||e[_DYN_TEARDOWN]||(e[STR_CORE]=null,e[_DYN_TEARDOWN]=!0,e[_DYN_IS_INITIALIZED]=!1,s[_DYN_TEARDOWN]&&!0===s[_DYN_TEARDOWN](r,o)&&(n=!0))),n},"unload",function(){},o[_DYN_IS_ASYNC])||r[_DYN_PROCESS_NEXT](o)},update:function(r,o){l(r,function(){var e,t,n=!1;return s&&(e=_getPluginState(s),t=s[STR_CORE]||e[STR_CORE],!s||t&&t!==r.core()||e[_DYN_TEARDOWN]||s[_DYN_UPDATE]&&!0===s[_DYN_UPDATE](r,o)&&(n=!0)),n},"update",function(){},!1)||r[_DYN_PROCESS_NEXT](o)},_id:u,_setNext:function(e){c=e}};function l(n,r,o,e,t){var i=!1,a=s?s[_DYN_IDENTIFIER]:strTelemetryPluginChain,_=(_=n[strHasRunFlags])||(n[strHasRunFlags]={});return n.setNext(c),s&&doPerf(n[STR_CORE](),function(){return a+":"+o},function(){_[u]=!0;try{var e=c?c._id:STR_EMPTY;e&&(_[e]=!1),i=r(n)}catch(t){e=!c||_[c._id];e&&(i=!0),c&&e||_throwInternal(n[_DYN_DIAG_LOG$1](),1,73,"Plugin ["+a+"] failed during "+o+" - "+dumpObj(t)+", run flags: "+dumpObj(_))}},e,t),i}return objFreeze(_)}function createUnloadHandlerContainer(){var t=[];return{add:function(e){e&&t[_DYN_PUSH$1](e)},run:function(n,r){arrForEach(t,function(e){try{e(n,r)}catch(t){_throwInternal(n[_DYN_DIAG_LOG$1](),2,73,"Unexpected error calling unload handler - "+dumpObj(t))}}),t=[]}}}function createUnloadHookContainer(){var t=[];return{run:function(n){var e=t;t=[],arrForEach(e,function(e){try{(e.rm||e.remove).call(e)}catch(t){_throwInternal(n,2,73,"Unloading:"+dumpObj(t))}})},add:function(e){e&&arrAppend(t,e)}}}var strGetPlugin="getPlugin",defaultValues=((_a$2={})[STR_EXTENSION_CONFIG]={isVal:isNotNullOrUndefined,v:{}},_a$2),BaseTelemetryPlugin=function(){function e(){var o,i,c,u,l,a=this;function t(e){var t,e=e=void 0===e?null:e;return e||(t=i||createProcessTelemetryContext(null,{},a[STR_CORE]),e=c&&c[strGetPlugin]?t[_DYN_CREATE_NEW$1](null,c[strGetPlugin]):t[_DYN_CREATE_NEW$1](null,c)),e}function _(e,t,n){createDynamicConfig(e,defaultValues,safeGetLogger(t)),!n&&t&&(n=t[_DYN_GET_PROCESS_TEL_CONT0]()[_DYN_GET_NEXT]());var r=c;c&&c[strGetPlugin]&&(r=c[strGetPlugin]()),a[STR_CORE]=t,i=createProcessTelemetryContext(n,e,t,r)}function N(){o=!1,a[STR_CORE]=null,c=i=null,l=createUnloadHookContainer(),u=createUnloadHandlerContainer()}N(),dynamicProto(e,a,function(s){s[_DYN_INITIALIZE]=function(e,t,n,r){_(e,t,r),o=!0},s[_DYN_TEARDOWN]=function(e,t){var n,r,o,i,a=s[STR_CORE];if(a&&(!e||a===e[STR_CORE]()))return r=!1,o=e||createProcessTelemetryUnloadContext(null,a,c&&c[strGetPlugin]?c[strGetPlugin]():c),i=t||((e={reason:0})[_DYN_IS_ASYNC]=!1,e),s[_DYN__DO_TEARDOWN]&&!0===s[_DYN__DO_TEARDOWN](o,i,_)?n=!0:_(),n;function _(){r||(r=!0,u.run(o,t),l.run(o[_DYN_DIAG_LOG$1]()),!0===n&&o[_DYN_PROCESS_NEXT](i),N())}},s[_DYN_UPDATE]=function(e,t){var n,r,o,i=s[STR_CORE];if(i&&(!e||i===e[STR_CORE]()))return r=!1,o=e||createProcessTelemetryUpdateContext(null,i,c&&c[strGetPlugin]?c[strGetPlugin]():c),s._doUpdate&&!0===s._doUpdate(o,t||{reason:0},a)?n=!0:a(),n;function a(){r||(r=!0,_(o.getCfg(),o.core(),o[_DYN_GET_NEXT]()))}},proxyFunctionAs(s,"_addUnloadCb",function(){return u},"add"),proxyFunctionAs(s,"_addHook",function(){return l},"add"),objDefine(s,"_unloadHooks",{g:function(){return l}})}),a[_DYN_DIAG_LOG$1]=function(e){return t(e)[_DYN_DIAG_LOG$1]()},a[_DYN_IS_INITIALIZED]=function(){return o},a.setInitialized=function(e){o=e},a[_DYN_SET_NEXT_PLUGIN]=function(e){c=e},a[_DYN_PROCESS_NEXT]=function(e,t){t?t[_DYN_PROCESS_NEXT](e):c&&isFunction(c[STR_PROCESS_TELEMETRY])&&c[STR_PROCESS_TELEMETRY](e,null)},a._getTelCtx=t}return e.__ieDyn=1,e}();function _addInitializer(n,e,t){var r={id:e,fn:t};return arrAppend(n,r),{remove:function(){arrForEach(n,function(e,t){if(e.id===r.id)return n[_DYN_SPLICE](t,1),-1})}}}function _runInitializers(e,t,n){for(var r=!1,o=e[_DYN_LENGTH$2],i=0;i<o;++i){var a=e[i];if(a)try{if(!1===a.fn[_DYN_APPLY](null,[t])){r=!0;break}}catch(_){_throwInternal(n,2,64,"Telemetry initializer failed: "+getExceptionName(_),{exception:dumpObj(_)},!0)}}return!r}var _a$1,TelemetryInitializerPlugin=function(n){function i(){var t,r,e=n.call(this)||this;function o(){t=0,r=[]}return e.identifier="TelemetryInitializerPlugin",e.priority=199,o(),dynamicProto(i,e,function(n,e){n.addTelemetryInitializer=function(e){return _addInitializer(r,t++,e)},n[STR_PROCESS_TELEMETRY]=function(e,t){_runInitializers(r,e,(t||n)[_DYN_DIAG_LOG$1]())&&n[_DYN_PROCESS_NEXT](e,t)},n[_DYN__DO_TEARDOWN]=function(){o()}}),e}return __extendsFn(i,n),i.__ieDyn=1,i}(BaseTelemetryPlugin),strValidationError="Plugins must provide initialize method",strNotificationManager="_notificationManager",strSdkUnloadingError="SDK is still unloading...",strSdkNotInitialized="SDK is not initialized",defaultConfig=objDeepFreeze(((_a$1={cookieCfg:{}})[STR_EXTENSIONS]={rdOnly:!0,ref:!0,v:[]},_a$1[STR_CHANNELS]={rdOnly:!0,ref:!0,v:[]},_a$1[STR_EXTENSION_CONFIG]={ref:!0,v:{}},_a$1[STR_CREATE_PERF_MGR]=UNDEFINED_VALUE$1,_a$1.loggingLevelConsole=0,_a$1.diagnosticLogInterval=UNDEFINED_VALUE$1,_a$1));function _createPerfManager(e,t){return new PerfManager(t)}function _validateExtensions(r,o,e){var i=[],a=[],_={};return arrForEach(e,function(e){(isNullOrUndefined(e)||isNullOrUndefined(e[_DYN_INITIALIZE]))&&throwError(strValidationError);var t=e[STR_PRIORITY],n=e[_DYN_IDENTIFIER];e&&t&&(isNullOrUndefined(_[t])?_[t]=n:_warnToConsole(r,"Two extensions have same priority #"+t+" - "+_[t]+", "+n)),(!t||t<o?i:a)[_DYN_PUSH$1](e)}),(e={})[STR_CORE]=i,e[STR_CHANNELS]=a,e}function _isPluginPresent(t,e){var n=!1;return arrForEach(e,function(e){if(e===t)return n=!0,-1}),n}function _deepMergeConfig(n,r,e,o){e&&objForEachKey(e,function(e,t){o&&isPlainObject(t)&&isPlainObject(r[e])&&_deepMergeConfig(n,r[e],t,o),o&&isPlainObject(t)&&isPlainObject(r[e])?_deepMergeConfig(n,r[e],t,o):n.set(r,e,t)})}function _findWatcher(e,n){var r=null,o=-1;return arrForEach(e,function(e,t){if(e.w===n)return r=e,o=t,-1}),{i:o,l:r}}function _addDelayedCfgListener(t,n){var e=_findWatcher(t,n).l;return e||t[_DYN_PUSH$1](e={w:n,rm:function(){var e=_findWatcher(t,n);-1!==e.i&&t[_DYN_SPLICE](e.i,1)}}),e}function _registerDelayedCfgListener(n,e,r){arrForEach(e,function(e){var t=onConfigChange(n,e.w,r);delete e.w,e.rm=function(){t.rm()}})}var AppInsightsCore=function(){function e(){var T,S,p,r,g,Y,I,y,A,m,O,C,P,R,v,h,L,b,U,F,G,M,w,x,H,j,V,k;dynamicProto(e,this,function(_){function a(e){return j&&j[_DYN_ENABLED]||k||(e||p&&0<p.queue[_DYN_LENGTH$2])&&(V||(V=!0,i(T[_DYN_WATCH](function(e){var e=e.cfg.diagnosticLogInterval,t=(e&&0<e||(e=1e4),!1);j&&(t=j[_DYN_ENABLED],j[_DYN_CANCEL]()),(j=createTimeout(f,e)).unref(),j[_DYN_ENABLED]=t}))),j[_DYN_ENABLED]=!0),j}function t(){var n={},t=(x=[],function(e){e&&arrForEach(e,function(e){var t;e[_DYN_IDENTIFIER]&&e[_DYN_VERSION]&&!n[e.identifier]&&(t=e[_DYN_IDENTIFIER]+"="+e[_DYN_VERSION],x[_DYN_PUSH$1](t),n[e.identifier]=e)})});t(C),O&&arrForEach(O,function(e){t(e)}),t(m)}function s(){S=!1,(T=createDynamicConfig({},defaultConfig,_[_DYN_LOGGER])).cfg[_DYN_LOGGING_LEVEL_CONSOL4]=1,objDefine(_,"config",{g:function(){return T.cfg},s:function(e){_.updateCfg(e,!1)}}),objDefine(_,"pluginVersionStringArr",{g:function(){return x||t(),x}}),objDefine(_,"pluginVersionString",{g:function(){return H||(x||t(),H=x.join(";")),H||STR_EMPTY}}),objDefine(_,"logger",{g:function(){return p||(p=new DiagnosticLogger(T.cfg),T[_DYN_LOGGER]=p),p},s:function(e){T[_DYN_LOGGER]=e,p!==e&&(runTargetUnload(p,!1),p=e)}}),_[_DYN_LOGGER]=new DiagnosticLogger(T.cfg),w=[];var e=_.config[STR_EXTENSIONS]||[];e.splice(0,e[_DYN_LENGTH$2]),arrAppend(e,w),R=new TelemetryInitializerPlugin,runTargetUnload(g,!(r=[])),I=Y=g=null,runTargetUnload(y,!1),P=!(m=[]),h=createUniqueNamespace("AIBaseCore",!(v=C=O=A=y=null)),L=createUnloadHandlerContainer(),G=F=null,b=createUnloadHookContainer(),x=H=null,k=!(M=[])}function c(){var e=createProcessTelemetryContext(N(),T.cfg,_);return e[_DYN_ON_COMPLETE](a),e}function u(e){var t=_validateExtensions(_[_DYN_LOGGER],ChannelControllerPriority,m),t=(x=H=A=null,C=sortPlugins(arrAppend(C=(O||[])[0]||[],t[STR_CHANNELS])),arrAppend(sortPlugins(t[STR_CORE]),C)),n=(w=objFreeze(t),_.config[STR_EXTENSIONS]||[]),n=(n.splice(0,n[_DYN_LENGTH$2]),arrAppend(n,w),c());C&&0<C[_DYN_LENGTH$2]&&initializePlugins(n[_DYN_CREATE_NEW$1](C),t),initializePlugins(n,t),e&&o(e)}function l(t){var o=null,n=[];return arrForEach(w,function(e){if(e[_DYN_IDENTIFIER]===t&&e!==R)return o=e,-1;e.getChannel&&n[_DYN_PUSH$1](e)}),!o&&0<n[_DYN_LENGTH$2]&&arrForEach(n,function(e){if(!(o=e.getChannel(t)))return-1}),o?{plugin:o,setEnabled:function(e){_getPluginState(o)[STR_DISABLED]=!e},isEnabled:function(){var e=_getPluginState(o);return!e[_DYN_TEARDOWN]&&!e[STR_DISABLED]},remove:function(e,t){var n,r=[o];(n={reason:1})[_DYN_IS_ASYNC]=e=void 0===e||e,E(r,n,function(e){e&&u({reason:32,removed:r}),t&&t(e)})}}:null}function N(){var e;return A||(e=(w||[]).slice(),-1===arrIndexOf(e,R)&&e[_DYN_PUSH$1](R),A=createTelemetryProxyChain(sortPlugins(e),T.cfg,_)),A}function E(i,e,t){var n;i&&0<i[_DYN_LENGTH$2]?((n=createProcessTelemetryUnloadContext(createTelemetryProxyChain(i,T.cfg,_),_))[_DYN_ON_COMPLETE](function(){var r=!1,n=[],o=(arrForEach(m,function(e,t){_isPluginPresent(e,i)?r=!0:n[_DYN_PUSH$1](e)}),m=n,x=H=null,[]);O&&(arrForEach(O,function(e,t){var n=[];arrForEach(e,function(e){_isPluginPresent(e,i)?r=!0:n[_DYN_PUSH$1](e)}),o[_DYN_PUSH$1](n)}),O=o),t&&t(r),a()}),n[_DYN_PROCESS_NEXT](e)):t(!1)}function f(){var e;p&&p.queue&&(e=p.queue.slice(0),p.queue[_DYN_LENGTH$2]=0,arrForEach(e,function(e){(t={})[_DYN_NAME$2]=v||"InternalMessageId: "+e[_DYN_MESSAGE_ID],t.iKey=G,t[_DYN_TIME]=toISOString(new Date),t.baseType=_InternalLogMessage.dataType,t.baseData={message:e[_DYN_MESSAGE$1]};var t,e=t;_.track(e)}))}function D(n,e,r,o){var i=1,t=!1,a=null;function _(){i--,t&&0===i&&(a&&a[_DYN_CANCEL](),a=null,e&&e(t),e=null)}return o=o||5e3,C&&0<C[_DYN_LENGTH$2]&&c()[_DYN_CREATE_NEW$1](C).iterate(function(e){var t;e.flush&&(i++,t=!1,e.flush(n,function(){t=!0,_()},r)||t||(n&&null==a?a=scheduleTimeout(function(){a=null,_()},o):_()))}),t=!0,_(),!0}function o(e){var t=createProcessTelemetryUpdateContext(N(),_);t[_DYN_ON_COMPLETE](a),_._updateHook&&!0===_._updateHook(t,e)||t[_DYN_PROCESS_NEXT](e)}function d(e){var t=_[_DYN_LOGGER];t?(_throwInternal(t,2,73,e),a()):throwError(e)}function n(e){var t=_[_DYN_GET_NOTIFY_MGR]();t&&t[STR_EVENTS_DISCARDED]([e],2)}function i(e){b.add(e)}s(),_._getDbgPlgTargets=function(){return[w]},_[_DYN_IS_INITIALIZED]=function(){return S},_[_DYN_INITIALIZE]=function(e,t,n,r){P&&throwError(strSdkUnloadingError),_[_DYN_IS_INITIALIZED]()&&throwError("Core cannot be initialized more than once"),e=(T=createDynamicConfig(e,defaultConfig,n||_[_DYN_LOGGER],!1)).cfg,i(T[_DYN_WATCH](function(t){G=t.cfg.instrumentationKey;var n=t.ref(t.cfg,STR_EXTENSION_CONFIG);objForEachKey(n,function(e){t.ref(n,e)}),isNullOrUndefined(G)&&throwError("Please provide instrumentation key")})),(g=r)||_[_DYN_GET_NOTIFY_MGR](),i(T[_DYN_WATCH](function(e){var t=e.cfg.disableDbgExt;!0===t&&U&&(g[_DYN_REMOVE_NOTIFICATION_2](U),U=null),g&&!U&&!0!==t&&(U=getDebugListener(e.cfg),g[_DYN_ADD_NOTIFICATION_LIS1](U))})),i(T[_DYN_WATCH](function(e){var t=e.cfg.enablePerfMgr;!t&&I&&(I=null),t&&getSetValue(e.cfg,STR_CREATE_PERF_MGR,_createPerfManager)})),_[_DYN_LOGGER]=n;r=e[STR_EXTENSIONS];(m=[])[_DYN_PUSH$1].apply(m,__spreadArrayFn(__spreadArrayFn([],t,!1),r)),O=e[STR_CHANNELS],u(null),C&&0!==C[_DYN_LENGTH$2]||throwError("No "+STR_CHANNELS+" available"),O&&1<O[_DYN_LENGTH$2]&&((n=_[_DYN_GET_PLUGIN]("TeeChannelController"))&&n.plugin||_throwInternal(p,1,28,"TeeChannel required")),_registerDelayedCfgListener(e,M,p),S=!(M=null),_.releaseQueue(),_[_DYN_POLL_INTERNAL_LOGS]()},_.getChannels=function(){var t=[];return C&&arrForEach(C,function(e){t[_DYN_PUSH$1](e)}),objFreeze(t)},_.track=function(e){doPerf(_[STR_GET_PERF_MGR](),function(){return"AppInsightsCore:track"},function(){null===e&&(n(e),throwError("Invalid telemetry item")),!e[_DYN_NAME$2]&&isNullOrUndefined(e[_DYN_NAME$2])&&(n(e),throwError("telemetry name required")),e.iKey=e.iKey||G,e[_DYN_TIME]=e[_DYN_TIME]||toISOString(new Date),e.ver=e.ver||"4.0",!P&&_[_DYN_IS_INITIALIZED]()?c()[_DYN_PROCESS_NEXT](e):r[_DYN_PUSH$1](e)},function(){return{item:e}},!e.sync)},_[_DYN_GET_PROCESS_TEL_CONT0]=c,_[_DYN_GET_NOTIFY_MGR]=function(){return g||(g=new NotificationManager(T.cfg),_[strNotificationManager]=g),g},_[_DYN_ADD_NOTIFICATION_LIS1]=function(e){_[_DYN_GET_NOTIFY_MGR]()[_DYN_ADD_NOTIFICATION_LIS1](e)},_[_DYN_REMOVE_NOTIFICATION_2]=function(e){g&&g[_DYN_REMOVE_NOTIFICATION_2](e)},_.getCookieMgr=function(){return y=y||createCookieMgr(T.cfg,_[_DYN_LOGGER])},_.setCookieMgr=function(e){y!==e&&(runTargetUnload(y,!1),y=e)},_[STR_GET_PERF_MGR]=function(){return Y||I||i(T[_DYN_WATCH](function(e){e.cfg.enablePerfMgr&&(e=e.cfg[STR_CREATE_PERF_MGR],isFunction(e)&&(I=e(_,_[_DYN_GET_NOTIFY_MGR]())))})),Y||I||getGblPerfMgr()},_.setPerfMgr=function(e){Y=e},_.eventCnt=function(){return r[_DYN_LENGTH$2]},_.releaseQueue=function(){var e;S&&0<r[_DYN_LENGTH$2]&&(e=r,r=[],arrForEach(e,function(e){c()[_DYN_PROCESS_NEXT](e)}))},_[_DYN_POLL_INTERNAL_LOGS]=function(e){return v=e||null,k=!1,j&&j[_DYN_CANCEL](),a(!0)},_[_DYN_STOP_POLLING_INTERNA3]=function(){k=!0,j&&j[_DYN_CANCEL](),f()},proxyFunctions(_,function(){return R},["addTelemetryInitializer"]),_[_DYN_UNLOAD]=function(e,t,n){void 0===e&&(e=!0),S||throwError(strSdkNotInitialized),P&&throwError(strSdkUnloadingError),(r={reason:50})[_DYN_IS_ASYNC]=e,r.flushComplete=!1;var r,o,i=r,a=(e&&!t&&(o=createPromise(function(e){t=e})),createProcessTelemetryUnloadContext(N(),_));return a[_DYN_ON_COMPLETE](function(){b.run(_[_DYN_LOGGER]),doUnloadAll([y,g,p],e,function(){s(),t&&t(i)})},_),f(),D(e,function(e){i.flushComplete=e,P=!0,L.run(a,i),_[_DYN_STOP_POLLING_INTERNA3](),a[_DYN_PROCESS_NEXT](i)},6,n),o},_[_DYN_GET_PLUGIN]=l,_.addPlugin=function(e,t,n,r){if(!e)return r&&r(!1),void d(strValidationError);var o=l(e[_DYN_IDENTIFIER]);if(o&&!t)return r&&r(!1),void d("Plugin ["+e[_DYN_IDENTIFIER]+"] is already loaded!");var i,a={reason:16};function _(){m[_DYN_PUSH$1](e),a.added=[e],u(a),r&&r(!0)}o?E(i=[o.plugin],{reason:2,isAsync:!!n},function(e){e?(a.removed=i,a.reason|=32,_()):r&&r(!1)}):_()},_.updateCfg=function(r,e){var t,n;void 0===e&&(e=!0),_[_DYN_IS_INITIALIZED]()&&(t={reason:1,cfg:T.cfg,oldCfg:deepExtend({},T.cfg),newConfig:deepExtend({},r),merge:e},r=t.newConfig,n=T.cfg,r[STR_EXTENSIONS]=n[STR_EXTENSIONS],r[STR_CHANNELS]=n[STR_CHANNELS]),T._block(function(t){var n=t.cfg;_deepMergeConfig(t,n,r,e),e||objForEachKey(n,function(e){objHasOwn(r,e)||t.set(n,e,UNDEFINED_VALUE$1)}),t[_DYN_SET_DF](n,defaultConfig)},!0),T[_DYN_NOTIFY](),t&&o(t)},_.evtNamespace=function(){return h},_.flush=D,_.getTraceCtx=function(e){return F=F||createDistributedTraceContext()},_.setTraceCtx=function(e){F=e||null},_.addUnloadHook=i,proxyFunctionAs(_,"addUnloadCb",function(){return L},"add"),_.onCfgChange=function(e){var t=S?onConfigChange(T.cfg,e,_[_DYN_LOGGER]):_addDelayedCfgListener(M,e);return{rm:function(){t.rm()}}},_.getWParam=function(){return hasDocument()||T.cfg.enableWParam?0:-1}})}return e.__ieDyn=1,e}(),strOnPrefix="on",strAttachEvent="attachEvent",strAddEventHelper="addEventListener",strDetachEvent="detachEvent",strRemoveEventListener="removeEventListener",strEvents="events",rRemoveEmptyNs=(createUniqueNamespace("aiEvtPageHide"),createUniqueNamespace("aiEvtPageShow"),/\.[\.]+/g),rRemoveTrailingEmptyNs=/[\.]+$/,_guid=1,elmNodeData=createElmNodeData("events"),eventNamespace=/^([^.]*)(?:\.(.+)|)/;function _normalizeNamespace(e){return e&&e[_DYN_REPLACE]?e[_DYN_REPLACE](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,STR_EMPTY):e}function _getEvtNamespace(e,t){t&&(n=STR_EMPTY,isArray(t)?(n=STR_EMPTY,arrForEach(t,function(e){(e=_normalizeNamespace(e))&&("."!==e[0]&&(e="."+e),n+=e)})):n=_normalizeNamespace(t),n&&("."!==n[0]&&(n="."+n),e=(e||STR_EMPTY)+n));var n,t=eventNamespace.exec(e||STR_EMPTY)||[],e={};return e[_DYN_TYPE]=t[1],e.ns=(t[2]||STR_EMPTY).replace(rRemoveEmptyNs,".").replace(rRemoveTrailingEmptyNs,STR_EMPTY)[_DYN_SPLIT$1](".").sort().join("."),e}function _getRegisteredEvents(e,t,n){e=elmNodeData.get(e,strEvents,{},n=void 0===n||n);return e[t]||(e[t]=[])}function _doDetach(e,t,n,r){e&&t&&t[_DYN_TYPE]&&(e[strRemoveEventListener]?e[strRemoveEventListener](t[_DYN_TYPE],n,r):e[strDetachEvent]&&e[strDetachEvent](strOnPrefix+t[_DYN_TYPE],n))}function _doAttach(e,t,n,r){var o=!1;return e&&t&&t[_DYN_TYPE]&&n&&(e[strAddEventHelper]?(e[strAddEventHelper](t[_DYN_TYPE],n,r),o=!0):e[strAttachEvent]&&(e[strAttachEvent](strOnPrefix+t[_DYN_TYPE],n),o=!0)),o}function _doUnregister(e,t,n,r){for(var o=t[_DYN_LENGTH$2];o--;){var i=t[o];!i||n.ns&&n.ns!==i.evtName.ns||r&&!r(i)||(_doDetach(e,i.evtName,i[_DYN_HANDLER],i.capture),t[_DYN_SPLICE](o,1))}}function _unregisterEvents(n,r,o){var e;r[_DYN_TYPE]?_doUnregister(n,_getRegisteredEvents(n,r[_DYN_TYPE]),r,o):(objForEachKey(e=elmNodeData.get(n,strEvents,{}),function(e,t){_doUnregister(n,t,r,o)}),0===objKeys(e)[_DYN_LENGTH$2]&&elmNodeData.kill(n,strEvents))}function mergeEvtNamespace(e,t){return t?_getEvtNamespace("xx",isArray(t)?[e].concat(t):[e,t]).ns[_DYN_SPLIT$1]("."):e}function eventOn(e,t,n,r,o){void 0===o&&(o=!1);var i,a=!1;if(e)try{var _,s=_getEvtNamespace(t,r);(a=_doAttach(e,s,n,o))&&elmNodeData.accept(e)&&((i={guid:_guid++,evtName:s})[_DYN_HANDLER]=n,i.capture=o,_=i,_getRegisteredEvents(e,s.type)[_DYN_PUSH$1](_))}catch(c){}return a}function eventOff(e,t,n,r,o){if(void 0===o&&(o=!1),e)try{var i=_getEvtNamespace(t,r),a=!1;_unregisterEvents(e,i,function(e){return!((!i.ns||n)&&e[_DYN_HANDLER]!==n)&&(a=!0)}),a||_doDetach(e,i,n,o)}catch(_){}}var DisabledPropertyName="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",SampleRate="sampleRate",ProcessLegacy="ProcessLegacy",HttpMethod="http.method",DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",DEFAULT_BREEZE_PATH="/v2/track",strNotSpecified="not_specified",RequestHeaders=createValueMap({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),_DYN_SPLIT="split",_DYN_LENGTH$1="length",_DYN_TO_LOWER_CASE="toLowerCase",_DYN_INGESTIONENDPOINT="ingestionendpoint",_DYN_TO_STRING$1="toString",_DYN_REMOVE_ITEM="removeItem",_DYN_NAME$1="name",_DYN_MESSAGE="message",_DYN_COUNT$1="count",_DYN_STRINGIFY$1="stringify",_DYN_PATHNAME="pathname",_DYN_EXCEPTIONS="exceptions",_DYN_PARSED_STACK="parsedStack",_DYN_PROPERTIES="properties",_DYN_MEASUREMENTS$1="measurements",_DYN_SIZE_IN_BYTES="sizeInBytes",_DYN_TYPE_NAME="typeName",_DYN_SEVERITY_LEVEL="severityLevel",_DYN_PROBLEM_GROUP="problemGroup",_DYN_IS_MANUAL="isManual",_DYN__CREATE_FROM_INTERFA1="CreateFromInterface",_DYN_ASSEMBLY="assembly",_DYN_FILE_NAME="fileName",_DYN_HAS_FULL_STACK="hasFullStack",_DYN_LEVEL="level",_DYN_METHOD="method",_DYN_LINE="line",_DYN_DURATION="duration",_DYN_RECEIVED_RESPONSE="receivedResponse";function dataSanitizeKeyAndAddUniqueness(e,t,n){var r=t[_DYN_LENGTH$1],o=dataSanitizeKey(e,t);if(o[_DYN_LENGTH$1]!==r){for(var i=0,a=o;n[a]!==undefined;)i++,a=strSubstring(o,0,147)+dsPadNumber(i);o=a}return o}function dataSanitizeKey(e,t){var n;return t&&150<(t=strTrim(asString(t)))[_DYN_LENGTH$1]&&(n=strSubstring(t,0,150),_throwInternal(e,2,57,"name is too long.  It has been truncated to 150 characters.",{name:t},!0)),n||t}function dataSanitizeString(e,t,n){var r;return void 0===n&&(n=1024),t&&(n=n||1024,(t=strTrim(asString(t)))[_DYN_LENGTH$1]>n&&(r=strSubstring(t,0,n),_throwInternal(e,2,61,"string value is too long. It has been truncated to "+n+" characters.",{value:t},!0))),r||t}function dataSanitizeUrl(e,t){return dataSanitizeInput(e,t,2048,66)}function dataSanitizeMessage(e,t){var n;return t&&32768<t[_DYN_LENGTH$1]&&(n=strSubstring(t,0,32768),_throwInternal(e,2,56,"message is too long, it has been truncated to 32768 characters.",{message:t},!0)),n||t}function dataSanitizeException(e,t){var n,r;return t&&32768<(r=""+t)[_DYN_LENGTH$1]&&(n=strSubstring(r,0,32768),_throwInternal(e,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:t},!0)),n||t}function dataSanitizeProperties(r,e){var o;return e&&(o={},objForEachKey(e,function(e,t){if(isObject(t)&&hasJSON())try{t=getJSON()[_DYN_STRINGIFY$1](t)}catch(n){_throwInternal(r,2,49,"custom property is not valid",{exception:n},!0)}t=dataSanitizeString(r,t,8192),e=dataSanitizeKeyAndAddUniqueness(r,e,o),o[e]=t}),e=o),e}function dataSanitizeMeasurements(n,e){var r;return e&&(r={},objForEachKey(e,function(e,t){e=dataSanitizeKeyAndAddUniqueness(n,e,r),r[e]=t}),e=r),e}function dataSanitizeId(e,t){return t&&dataSanitizeInput(e,t,128,69)[_DYN_TO_STRING$1]()}function dataSanitizeInput(e,t,n,r){var o;return t&&(t=strTrim(asString(t)))[_DYN_LENGTH$1]>n&&(o=strSubstring(t,0,n),_throwInternal(e,2,r,"input is too long, it has been truncated to "+n+" characters.",{data:t},!0)),o||t}function dsPadNumber(e){e="00"+e;return strSubstr(e,e[_DYN_LENGTH$1]-3)}var _document=getDocument()||{},_htmlAnchorIdx=0,_htmlAnchorElement=[null,null,null,null,null];function urlParseUrl(e){var t=_htmlAnchorIdx,n=_htmlAnchorElement,r=n[t];return _document.createElement?n[t]||(r=n[t]=_document.createElement("a")):r={host:urlParseHost(e,!0)},r.href=e,++t>=n[_DYN_LENGTH$1]&&(t=0),_htmlAnchorIdx=t,r}function urlParseHost(e,t){e=urlParseFullHost(e,t)||"";if(e){t=e.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(null!=t&&3<t[_DYN_LENGTH$1]&&isString(t[2])&&0<t[2][_DYN_LENGTH$1])return t[2]+(t[3]||"")}return e}function urlParseFullHost(e,t){var n=null;return e&&null!=(e=e.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i))&&2<e[_DYN_LENGTH$1]&&isString(e[2])&&0<e[2][_DYN_LENGTH$1]&&(n=e[2]||"",t&&2<e[_DYN_LENGTH$1]&&(t=(e[1]||"")[_DYN_TO_LOWER_CASE](),e=e[3]||"",n+=e="http"===t&&":80"===e||"https"===t&&":443"===e?"":e)),n}var _internalEndpoints=[DEFAULT_BREEZE_ENDPOINT+DEFAULT_BREEZE_PATH,"https://breeze.aimon.applicationinsights.io"+DEFAULT_BREEZE_PATH,"https://dc-int.services.visualstudio.com"+DEFAULT_BREEZE_PATH];function isInternalApplicationInsightsEndpoint(e){return-1!==arrIndexOf(_internalEndpoints,e[_DYN_TO_LOWER_CASE]())}function AjaxHelperParseDependencyPath(e,t,n,r){var o,i,a,_=r,s=r,_=t&&0<t[_DYN_LENGTH$1]?(a=(o=urlParseUrl(t)).host,_||(null!=o[_DYN_PATHNAME]?("/"!=((i=0===o.pathname[_DYN_LENGTH$1]?"/":o[_DYN_PATHNAME])[0]||"")&&(i="/"+i),s=o[_DYN_PATHNAME],dataSanitizeString(e,n?n+" "+i:i)):dataSanitizeString(e,t))):a=r;return{target:a,name:_,data:s}}var StorageType=createEnumStyle({LocalStorage:0,SessionStorage:1}),_canUseSessionStorage=(createEnumStyle({AI:0,AI_AND_W3C:1,W3C:2}),undefined),_storagePrefix="";function _getVerifiedStorageObject(e){try{if(isNullOrUndefined(getGlobal()))return null;var t=(new Date)[_DYN_TO_STRING$1](),n=getInst(e===StorageType.LocalStorage?"localStorage":"sessionStorage"),r=_storagePrefix+t,o=(n.setItem(r,t),n.getItem(r)!==t);if(n[_DYN_REMOVE_ITEM](r),!o)return n}catch(i){}return null}function _getSessionStorageObject(){return utlCanUseSessionStorage()?_getVerifiedStorageObject(StorageType.SessionStorage):null}function utlSetStoragePrefix(e){_storagePrefix=e||""}function utlCanUseSessionStorage(e){return _canUseSessionStorage=e||_canUseSessionStorage===undefined?!!_getVerifiedStorageObject(StorageType.SessionStorage):_canUseSessionStorage}function utlGetSessionStorage(e,t){var n=_getSessionStorageObject();if(null!==n)try{return n.getItem(t)}catch(r){_canUseSessionStorage=!1,_throwInternal(e,2,2,"Browser failed read of session storage. "+getExceptionName(r),{exception:dumpObj(r)})}return null}function utlSetSessionStorage(e,t,n){var r=_getSessionStorageObject();if(null!==r)try{return r.setItem(t,n),!0}catch(o){_canUseSessionStorage=!1,_throwInternal(e,2,4,"Browser failed write to session storage. "+getExceptionName(o),{exception:dumpObj(o)})}return!1}var _FIELDS_SEPARATOR=";",_FIELD_KEY_VALUE_SEPARATOR="=";function parseConnectionString(e){if(!e)return{};var t,e=e[_DYN_SPLIT](_FIELDS_SEPARATOR),e=arrReduce(e,function(e,t){var n,t=t[_DYN_SPLIT](_FIELD_KEY_VALUE_SEPARATOR);return 2===t[_DYN_LENGTH$1]&&(n=t[0][_DYN_TO_LOWER_CASE](),t=t[1],e[n]=t),e},{});return 0<objKeys(e)[_DYN_LENGTH$1]&&(e.endpointsuffix&&(t=e.location?e.location+".":"",e[_DYN_INGESTIONENDPOINT]=e[_DYN_INGESTIONENDPOINT]||"https://"+t+"dc."+e.endpointsuffix),e[_DYN_INGESTIONENDPOINT]=e[_DYN_INGESTIONENDPOINT]||DEFAULT_BREEZE_ENDPOINT,strEndsWith(e[_DYN_INGESTIONENDPOINT],"/")&&(e[_DYN_INGESTIONENDPOINT]=e[_DYN_INGESTIONENDPOINT].slice(0,-1))),e}var Envelope=function(e,t,n){var r=this,o=this;o.ver=1,o.sampleRate=100,o.tags={},o[_DYN_NAME$1]=dataSanitizeString(e,n)||strNotSpecified,o.data=t,o.time=toISOString(new Date),o.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return 100===r.sampleRate?4:1},tags:1,data:1}},Event$1=function(){function e(e,t,n,r){this.aiDataContract={ver:1,name:1,properties:0,measurements:0},this.ver=2,this[_DYN_NAME$1]=dataSanitizeString(e,t)||strNotSpecified,this[_DYN_PROPERTIES]=dataSanitizeProperties(e,n),this[_DYN_MEASUREMENTS$1]=dataSanitizeMeasurements(e,r)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Event",e.dataType="EventData",e}(),NoMethod="<no_method>",strError="error",strStack="stack",strStackDetails="stackDetails",strErrorSrc="errorSrc",strMessage="message",strDescription="description";function _stringify(e,t){var n=e;return n&&!isString(n)&&(JSON&&JSON[_DYN_STRINGIFY$1]?(n=JSON[_DYN_STRINGIFY$1](e),!t||n&&"{}"!==n||(n=isFunction(e[_DYN_TO_STRING$1])?e[_DYN_TO_STRING$1]():""+e)):n=e+" - (Missing JSON.stringify)"),n||""}function _formatMessage(e,t){var n=e;return e&&((n=n&&!isString(n)&&(e[strMessage]||e[strDescription])||n)&&!isString(n)&&(n=_stringify(n,!0)),e.filename&&(n=n+" @"+(e.filename||"")+":"+(e.lineno||"?")+":"+(e.colno||"?"))),(t&&"String"!==t&&"Object"!==t&&"Error"!==t&&-1===strIndexOf(n||"",t)?t+": "+n:n)||""}function _isExceptionDetailsInternal(e){try{if(isObject(e))return"hasFullStack"in e&&"typeName"in e}catch(t){}return!1}function _isExceptionInternal(e){try{if(isObject(e))return"ver"in e&&"exceptions"in e&&"properties"in e}catch(t){}return!1}function _isStackDetails(e){return e&&e.src&&isString(e.src)&&e.obj&&isArray(e.obj)}function _convertStackObj(e){var e=e||"",t=(e=isString(e)?e:isString(e[strStack])?e[strStack]:""+e)[_DYN_SPLIT]("\n");return{src:e,obj:t}}function _getOperaStack(e){for(var t=[],n=e[_DYN_SPLIT]("\n"),r=0;r<n[_DYN_LENGTH$1];r++){var o=n[r];n[r+1]&&(o+="@"+n[r+1],r++),t.push(o)}return{src:e,obj:t}}function _getStackFromErrorObj(e){var t,n=null;if(e)try{e[strStack]?n=_convertStackObj(e[strStack]):e[strError]&&e[strError][strStack]?n=_convertStackObj(e[strError][strStack]):e.exception&&e.exception[strStack]?n=_convertStackObj(e.exception[strStack]):_isStackDetails(e)?n=e:_isStackDetails(e[strStackDetails])?n=e[strStackDetails]:getWindow()&&getWindow().opera&&e[strMessage]?n=_getOperaStack(e[_DYN_MESSAGE]):e.reason&&e.reason[strStack]?n=_convertStackObj(e.reason[strStack]):isString(e)?n=_convertStackObj(e):(t=e[strMessage]||e[strDescription]||"",isString(e[strErrorSrc])&&(t&&(t+="\n"),t+=" from "+e[strErrorSrc]),t&&(n=_convertStackObj(t)))}catch(r){n=_convertStackObj(r)}return n||{src:"",obj:null}}function _formatStackTrace(e){var t="";return e&&(e.obj?arrForEach(e.obj,function(e){t+=e+"\n"}):t=e.src||""),t}function _parseStack(e){e=e.obj;if(e&&0<e[_DYN_LENGTH$1]){var t=[],n=0,r=0;if(arrForEach(e,function(e){var e=e[_DYN_TO_STRING$1]();_StackFrame.regex.test(e)&&(e=new _StackFrame(e,n++),r+=e[_DYN_SIZE_IN_BYTES],t.push(e))}),32768<r)for(var o=0,i=t[_DYN_LENGTH$1]-1,a=0,_=o,s=i;o<i;){if(32768<(a+=t[o][_DYN_SIZE_IN_BYTES]+t[i][_DYN_SIZE_IN_BYTES])){t.splice(_,s-_+1);break}_=o,s=i,o++,i--}}return t}function _getErrorType(e){var t="";if(e&&!(t=e.typeName||e[_DYN_NAME$1]||""))try{var n=/function (.{1,200})\(/.exec(e.constructor[_DYN_TO_STRING$1]()),t=n&&1<n[_DYN_LENGTH$1]?n[1]:""}catch(r){}return t}function _formatErrorCode(e){if(e)try{var t,n;if(!isString(e))return t=_getErrorType(e),(n=_stringify(e,!1))&&"{}"!==n||(e[strError]&&(t=_getErrorType(e=e[strError])),n=_stringify(e,!0)),0!==strIndexOf(n,t)&&"String"!==t?t+":"+n:n}catch(r){}return""+(e||"")}var Exception=function(){function i(e,t,n,r,o,i){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var a=this;a.ver=2,_isExceptionInternal(t)?(a[_DYN_EXCEPTIONS]=t[_DYN_EXCEPTIONS]||[],a[_DYN_PROPERTIES]=t[_DYN_PROPERTIES],a[_DYN_MEASUREMENTS$1]=t[_DYN_MEASUREMENTS$1],t[_DYN_SEVERITY_LEVEL]&&(a[_DYN_SEVERITY_LEVEL]=t[_DYN_SEVERITY_LEVEL]),t.id&&(a.id=t.id),t[_DYN_PROBLEM_GROUP]&&(a[_DYN_PROBLEM_GROUP]=t[_DYN_PROBLEM_GROUP]),isNullOrUndefined(t[_DYN_IS_MANUAL])||(a[_DYN_IS_MANUAL]=t[_DYN_IS_MANUAL])):(a[_DYN_EXCEPTIONS]=[new _ExceptionDetails(e,t,n=n||{})],a[_DYN_PROPERTIES]=dataSanitizeProperties(e,n),a[_DYN_MEASUREMENTS$1]=dataSanitizeMeasurements(e,r),o&&(a[_DYN_SEVERITY_LEVEL]=o),i&&(a.id=i))}return i.CreateAutoException=function(e,t,n,r,o,i,a,_){var s=_getErrorType(o||i||e),c={};return c[_DYN_MESSAGE]=_formatMessage(e,s),c.url=t,c.lineNumber=n,c.columnNumber=r,c.error=_formatErrorCode(o||i||e),c.evt=_formatErrorCode(i||e),c[_DYN_TYPE_NAME]=s,c.stackDetails=_getStackFromErrorObj(a||o||i),c.errorSrc=_,c},i.CreateFromInterface=function(t,e,n,r){var o=e[_DYN_EXCEPTIONS]&&arrMap(e[_DYN_EXCEPTIONS],function(e){return _ExceptionDetails[_DYN__CREATE_FROM_INTERFA1](t,e)});return new i(t,__assignFn(__assignFn({},e),{exceptions:o}),n,r)},i.prototype.toInterface=function(){var e=this,t=e.exceptions,n=e.properties,r=e.measurements,o=e.severityLevel,i=e.problemGroup,a=e.id,e=e.isManual,t=t instanceof Array&&arrMap(t,function(e){return e.toInterface()})||undefined,_={ver:"4.0"};return _[_DYN_EXCEPTIONS]=t,_.severityLevel=o,_.properties=n,_.measurements=r,_.problemGroup=i,_.id=a,_.isManual=e,_},i.CreateSimpleException=function(e,t,n,r,o,i){var a;return{exceptions:[((a={})[_DYN_HAS_FULL_STACK]=!0,a.message=e,a.stack=o,a.typeName=t,a)]}},i.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",i.dataType="ExceptionData",i.formatError=_formatErrorCode,i}(),_ExceptionDetails=function(){function r(t,e,n){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var r,o,i=this;_isExceptionDetailsInternal(e)?(i[_DYN_TYPE_NAME]=e[_DYN_TYPE_NAME],i[_DYN_MESSAGE]=e[_DYN_MESSAGE],i[strStack]=e[strStack],i[_DYN_PARSED_STACK]=e[_DYN_PARSED_STACK]||[],i[_DYN_HAS_FULL_STACK]=e[_DYN_HAS_FULL_STACK]):(o=(r=e)&&r.evt,isError(r)||(r=r[strError]||o||r),i[_DYN_TYPE_NAME]=dataSanitizeString(t,_getErrorType(r))||strNotSpecified,i[_DYN_MESSAGE]=dataSanitizeMessage(t,_formatMessage(e||r,i[_DYN_TYPE_NAME]))||strNotSpecified,o=e[strStackDetails]||_getStackFromErrorObj(e),i[_DYN_PARSED_STACK]=_parseStack(o),isArray(i[_DYN_PARSED_STACK])&&arrMap(i[_DYN_PARSED_STACK],function(e){e[_DYN_ASSEMBLY]=dataSanitizeString(t,e[_DYN_ASSEMBLY]),e[_DYN_FILE_NAME]=dataSanitizeString(t,e[_DYN_FILE_NAME])}),i[strStack]=dataSanitizeException(t,_formatStackTrace(o)),i.hasFullStack=isArray(i.parsedStack)&&0<i.parsedStack[_DYN_LENGTH$1],n&&(n[_DYN_TYPE_NAME]=n[_DYN_TYPE_NAME]||i[_DYN_TYPE_NAME]))}return r.prototype.toInterface=function(){var e=this,t=e[_DYN_PARSED_STACK]instanceof Array&&arrMap(e[_DYN_PARSED_STACK],function(e){return e.toInterface()});return(e={id:e.id,outerId:e.outerId,typeName:e[_DYN_TYPE_NAME],message:e[_DYN_MESSAGE],hasFullStack:e[_DYN_HAS_FULL_STACK],stack:e[strStack]})[_DYN_PARSED_STACK]=t||undefined,e},r.CreateFromInterface=function(e,t){var n=t[_DYN_PARSED_STACK]instanceof Array&&arrMap(t[_DYN_PARSED_STACK],function(e){return _StackFrame[_DYN__CREATE_FROM_INTERFA1](e)})||t[_DYN_PARSED_STACK];return new r(e,__assignFn(__assignFn({},t),{parsedStack:n}))},r}(),_StackFrame=function(){function o(e,t){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var n,r=this;r[_DYN_SIZE_IN_BYTES]=0,"string"==typeof e?(n=e,r[_DYN_LEVEL]=t,r[_DYN_METHOD]=NoMethod,r[_DYN_ASSEMBLY]=strTrim(n),r[_DYN_FILE_NAME]="",r[_DYN_LINE]=0,(t=n.match(o.regex))&&5<=t[_DYN_LENGTH$1]&&(r[_DYN_METHOD]=strTrim(t[2])||r[_DYN_METHOD],r[_DYN_FILE_NAME]=strTrim(t[4]),r[_DYN_LINE]=parseInt(t[5])||0)):(r[_DYN_LEVEL]=e[_DYN_LEVEL],r[_DYN_METHOD]=e[_DYN_METHOD],r[_DYN_ASSEMBLY]=e[_DYN_ASSEMBLY],r[_DYN_FILE_NAME]=e[_DYN_FILE_NAME],r[_DYN_LINE]=e[_DYN_LINE],r[_DYN_SIZE_IN_BYTES]=0),r.sizeInBytes+=r.method[_DYN_LENGTH$1],r.sizeInBytes+=r.fileName[_DYN_LENGTH$1],r.sizeInBytes+=r.assembly[_DYN_LENGTH$1],r[_DYN_SIZE_IN_BYTES]+=o.baseSize,r.sizeInBytes+=r.level.toString()[_DYN_LENGTH$1],r.sizeInBytes+=r.line.toString()[_DYN_LENGTH$1]}return o.CreateFromInterface=function(e){return new o(e,null)},o.prototype.toInterface=function(){var e=this;return{level:e[_DYN_LEVEL],method:e[_DYN_METHOD],assembly:e[_DYN_ASSEMBLY],fileName:e[_DYN_FILE_NAME],line:e[_DYN_LINE]}},o.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,o.baseSize=58,o}(),DataPoint=function(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0},Metric=function(){function e(e,t,n,r,o,i,a,_,s){this.aiDataContract={ver:1,metrics:1,properties:0},this.ver=2;var c=new DataPoint;c[_DYN_COUNT$1]=0<r?r:undefined,c.max=isNaN(i)||null===i?undefined:i,c.min=isNaN(o)||null===o?undefined:o,c[_DYN_NAME$1]=dataSanitizeString(e,t)||strNotSpecified,c.value=n,c.stdDev=isNaN(a)||null===a?undefined:a,this.metrics=[c],this[_DYN_PROPERTIES]=dataSanitizeProperties(e,_),this[_DYN_MEASUREMENTS$1]=dataSanitizeMeasurements(e,s)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",e.dataType="MetricData",e}(),strEmpty="";function msToTimeSpan(e){var t=strEmpty+Math.floor((e=Math.round(e=isNaN(e)||e<0?0:e))/1e3)%60,n=strEmpty+Math.floor(e/6e4)%60,r=strEmpty+Math.floor(e/36e5)%24,o=Math.floor(e/864e5),e=1===(e=strEmpty+e%1e3)[_DYN_LENGTH$1]?"00"+e:2===e[_DYN_LENGTH$1]?"0"+e:e,t=t[_DYN_LENGTH$1]<2?"0"+t:t,n=n[_DYN_LENGTH$1]<2?"0"+n:n,r=r[_DYN_LENGTH$1]<2?"0"+r:r;return(0<o?o+".":strEmpty)+r+":"+n+":"+t+"."+e}var PageView=function(){function e(e,t,n,r,o,i,a){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var _=this;_.ver=2,_.id=dataSanitizeId(e,a),_.url=dataSanitizeUrl(e,n),_[_DYN_NAME$1]=dataSanitizeString(e,t)||strNotSpecified,isNaN(r)||(_[_DYN_DURATION]=msToTimeSpan(r)),_[_DYN_PROPERTIES]=dataSanitizeProperties(e,o),_[_DYN_MEASUREMENTS$1]=dataSanitizeMeasurements(e,i)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",e.dataType="PageviewData",e}(),RemoteDependencyData=function(){function e(e,t,n,r,o,i,a,_,s,c,u,l){void 0===s&&(s="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var N=this,t=(N.ver=2,N.id=t,N[_DYN_DURATION]=msToTimeSpan(o),N.success=i,N.resultCode=a+"",N.type=dataSanitizeString(e,s),AjaxHelperParseDependencyPath(e,n,_,r));N.data=dataSanitizeUrl(e,r)||t.data,N.target=dataSanitizeString(e,t.target),c&&(N.target="".concat(N.target," | ").concat(c)),N[_DYN_NAME$1]=dataSanitizeString(e,t[_DYN_NAME$1]),N[_DYN_PROPERTIES]=dataSanitizeProperties(e,u),N[_DYN_MEASUREMENTS$1]=dataSanitizeMeasurements(e,l)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",e.dataType="RemoteDependencyData",e}(),Trace=function(){function e(e,t,n,r,o){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var i=this;i.ver=2,i[_DYN_MESSAGE]=dataSanitizeMessage(e,t=t||strNotSpecified),i[_DYN_PROPERTIES]=dataSanitizeProperties(e,r),i[_DYN_MEASUREMENTS$1]=dataSanitizeMeasurements(e,o),n&&(i[_DYN_SEVERITY_LEVEL]=n)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Message",e.dataType="MessageData",e}(),PageViewPerformance=function(){function e(e,t,n,r,o,i,a){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var _=this;_.ver=2,_.url=dataSanitizeUrl(e,n),_[_DYN_NAME$1]=dataSanitizeString(e,t)||strNotSpecified,_[_DYN_PROPERTIES]=dataSanitizeProperties(e,o),_[_DYN_MEASUREMENTS$1]=dataSanitizeMeasurements(e,i),a&&(_.domProcessing=a.domProcessing,_[_DYN_DURATION]=a[_DYN_DURATION],_.networkConnect=a.networkConnect,_.perfTotal=a.perfTotal,_[_DYN_RECEIVED_RESPONSE]=a[_DYN_RECEIVED_RESPONSE],_.sentRequest=a.sentRequest)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",e.dataType="PageviewPerformanceData",e}(),Data=function(e,t){this.aiDataContract={baseType:1,baseData:1},this.baseType=e,this.baseData=t},SeverityLevel=createEnumStyle({Verbose:0,Information:1,Warning:2,Error:3,Critical:4});function _aiNameFunc(e){var t="ai."+e+".";return function(e){return t+e}}var _aiApplication=_aiNameFunc("application"),_aiDevice=_aiNameFunc("device"),_aiLocation=_aiNameFunc("location"),_aiOperation=_aiNameFunc("operation"),_aiSession=_aiNameFunc("session"),_aiUser=_aiNameFunc("user"),_aiCloud=_aiNameFunc("cloud"),_aiInternal=_aiNameFunc("internal"),ContextTagKeys=function(e){function t(){return e.call(this)||this}return __extendsFn(t,e),t}(createClassFromInterface({applicationVersion:_aiApplication("ver"),applicationBuild:_aiApplication("build"),applicationTypeId:_aiApplication("typeId"),applicationId:_aiApplication("applicationId"),applicationLayer:_aiApplication("layer"),deviceId:_aiDevice("id"),deviceIp:_aiDevice("ip"),deviceLanguage:_aiDevice("language"),deviceLocale:_aiDevice("locale"),deviceModel:_aiDevice("model"),deviceFriendlyName:_aiDevice("friendlyName"),deviceNetwork:_aiDevice("network"),deviceNetworkName:_aiDevice("networkName"),deviceOEMName:_aiDevice("oemName"),deviceOS:_aiDevice("os"),deviceOSVersion:_aiDevice("osVersion"),deviceRoleInstance:_aiDevice("roleInstance"),deviceRoleName:_aiDevice("roleName"),deviceScreenResolution:_aiDevice("screenResolution"),deviceType:_aiDevice("type"),deviceMachineName:_aiDevice("machineName"),deviceVMName:_aiDevice("vmName"),deviceBrowser:_aiDevice("browser"),deviceBrowserVersion:_aiDevice("browserVersion"),locationIp:_aiLocation("ip"),locationCountry:_aiLocation("country"),locationProvince:_aiLocation("province"),locationCity:_aiLocation("city"),operationId:_aiOperation("id"),operationName:_aiOperation("name"),operationParentId:_aiOperation("parentId"),operationRootId:_aiOperation("rootId"),operationSyntheticSource:_aiOperation("syntheticSource"),operationCorrelationVector:_aiOperation("correlationVector"),sessionId:_aiSession("id"),sessionIsFirst:_aiSession("isFirst"),sessionIsNew:_aiSession("isNew"),userAccountAcquisitionDate:_aiUser("accountAcquisitionDate"),userAccountId:_aiUser("accountId"),userAgent:_aiUser("userAgent"),userId:_aiUser("id"),userStoreRegion:_aiUser("storeRegion"),userAuthUserId:_aiUser("authUserId"),userAnonymousUserAcquisitionDate:_aiUser("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:_aiUser("authUserAcquisitionDate"),cloudName:_aiCloud("name"),cloudRole:_aiCloud("role"),cloudRoleVer:_aiCloud("roleVer"),cloudRoleInstance:_aiCloud("roleInstance"),cloudEnvironment:_aiCloud("environment"),cloudLocation:_aiCloud("location"),cloudDeploymentUnit:_aiCloud("deploymentUnit"),internalNodeName:_aiInternal("nodeName"),internalSdkVersion:_aiInternal("sdkVersion"),internalAgentVersion:_aiInternal("agentVersion"),internalSnippet:_aiInternal("snippet"),internalSdkSrc:_aiInternal("sdkSrc")})),CtxTagKeys=new ContextTagKeys,BreezeChannelIdentifier="AppInsightsChannelPlugin",STR_DURATION="duration",_DYN_TAGS="tags",_DYN_DEVICE_TYPE="deviceType",_DYN_DATA="data",_DYN_NAME="name",_DYN_TRACE_ID="traceID",_DYN_LENGTH="length",_DYN_STRINGIFY="stringify",_DYN_MEASUREMENTS="measurements",_DYN_DATA_TYPE="dataType",_DYN_ENVELOPE_TYPE="envelopeType",_DYN_TO_STRING="toString",_DYN_ON_LINE="onLine",_DYN_IS_ONLINE="isOnline",_DYN__GET="_get",_DYN_ENQUEUE="enqueue",_DYN_COUNT="count",_DYN_EVENTS_LIMIT_IN_MEM="eventsLimitInMem",_DYN_PUSH="push",_DYN_EMIT_LINE_DELIMITED_0="emitLineDelimitedJson",_DYN_CLEAR="clear",_DYN_BATCH_PAYLOADS="batchPayloads",_DYN_CREATE_NEW="createNew",_DYN_MARK_AS_SENT="markAsSent",_DYN_CLEAR_SENT="clearSent",_DYN_BUFFER_OVERRIDE="bufferOverride",_DYN__BUFFER__KEY="BUFFER_KEY",_DYN__SENT__BUFFER__KEY="SENT_BUFFER_KEY",_DYN__MAX__BUFFER__SIZE="MAX_BUFFER_SIZE",_DYN_SEND_POST="sendPOST",_DYN_TRIGGER_SEND="triggerSend",_DYN_DIAG_LOG="diagLog",_DYN__SENDER="_sender",_DYN_CUSTOM_HEADERS="customHeaders",_DYN_MAX_BATCH_SIZE_IN_BY1="maxBatchSizeInBytes",_DYN_ONUNLOAD_DISABLE_BEA2="onunloadDisableBeacon",_DYN_IS_BEACON_API_DISABL3="isBeaconApiDisabled",_DYN_ALWAYS_USE_XHR_OVERR4="alwaysUseXhrOverride",_DYN_ENABLE_SESSION_STORA5="enableSessionStorageBuffer",_DYN__BUFFER="_buffer",_DYN_ONUNLOAD_DISABLE_FET6="onunloadDisableFetch",_DYN_INSTRUMENTATION_KEY$1="instrumentationKey",_DYN_CONVERT_UNDEFINED="convertUndefined",_DYN_MAX_BATCH_INTERVAL="maxBatchInterval",_DYN_BASE_TYPE="baseType",_DYN_SAMPLE_RATE="sampleRate",_DYN__XHR_READY_STATE_CHA7="_xhrReadyStateChange",_DYN__ON_ERROR="_onError",_DYN__ON_PARTIAL_SUCCESS="_onPartialSuccess",_DYN__ON_SUCCESS="_onSuccess",_DYN_ITEMS_ACCEPTED="itemsAccepted",_DYN_ITEMS_RECEIVED="itemsReceived",_DYN_ORI_PAYLOAD="oriPayload",_DYN_SET_REQUEST_HEADER="setRequestHeader",_DYN_EVENTS_SEND_REQUEST="eventsSendRequest",_DYN_GET_SAMPLING_SCORE="getSamplingScore",_DYN_GET_HASH_CODE_SCORE="getHashCodeScore",strBaseType="baseType",strBaseData="baseData",strProperties="properties",strTrue="true";function _setValueIf(e,t,n){return setValue(e,t,n,isTruthy)}function _extractPartAExtensions(e,t,n){for(var r=n[_DYN_TAGS]=n[_DYN_TAGS]||{},o=t.ext=t.ext||{},i=t[_DYN_TAGS]=t[_DYN_TAGS]||[],a=o.user,a=(a&&(_setValueIf(r,CtxTagKeys.userAuthUserId,a.authId),_setValueIf(r,CtxTagKeys.userId,a.id||a.localId)),o.app),a=(a&&_setValueIf(r,CtxTagKeys.sessionId,a.sesId),o.device),a=(a&&(_setValueIf(r,CtxTagKeys.deviceId,a.id||a.localId),_setValueIf(r,CtxTagKeys[_DYN_DEVICE_TYPE],a.deviceClass),_setValueIf(r,CtxTagKeys.deviceIp,a.ip),_setValueIf(r,CtxTagKeys.deviceModel,a.model),_setValueIf(r,CtxTagKeys[_DYN_DEVICE_TYPE],a[_DYN_DEVICE_TYPE])),t.ext.web),t=(a&&(_setValueIf(r,CtxTagKeys.deviceLanguage,a.browserLang),_setValueIf(r,CtxTagKeys.deviceBrowserVersion,a.browserVer),_setValueIf(r,CtxTagKeys.deviceBrowser,a.browser),_setValueIf(t=(t=(t=n[_DYN_DATA]=n[_DYN_DATA]||{})[strBaseData]=t[strBaseData]||{})[strProperties]=t[strProperties]||{},"domain",a.domain),_setValueIf(t,"isManual",a.isManual?strTrue:null),_setValueIf(t,"screenRes",a.screenRes),_setValueIf(t,"userConsent",a.userConsent?strTrue:null)),o.os),a=(t&&_setValueIf(r,CtxTagKeys.deviceOS,t[_DYN_NAME]),o.trace),_=(a&&(_setValueIf(r,CtxTagKeys.operationParentId,a.parentID),_setValueIf(r,CtxTagKeys.operationName,dataSanitizeString(e,a[_DYN_NAME])),_setValueIf(r,CtxTagKeys.operationId,a[_DYN_TRACE_ID])),{}),s=i[_DYN_LENGTH]-1;0<=s;s--)objForEachKey(i[s],function(e,t){_[e]=t}),i.splice(s,1);objForEachKey(i,function(e,t){_[e]=t});t=__assignFn(__assignFn({},r),_);t[CtxTagKeys.internalSdkVersion]||(t[CtxTagKeys.internalSdkVersion]=dataSanitizeString(e,"javascript:".concat(EnvelopeCreator.Version),64)),n[_DYN_TAGS]=optimizeObject(t)}function _extractPropsAndMeasurements(e,n,r){isNullOrUndefined(e)||objForEachKey(e,function(e,t){isNumber(t)?r[e]=t:isString(t)?n[e]=t:hasJSON()&&(n[e]=getJSON()[_DYN_STRINGIFY](t))})}function _convertPropsUndefinedToCustomDefinedValue(n,r){isNullOrUndefined(n)||objForEachKey(n,function(e,t){n[e]=t||r})}function _createEnvelope(e,t,n,r){r=new Envelope(e,r,t),_setValueIf(r,"sampleRate",n[SampleRate]),(n[strBaseData]||{}).startTime&&(r.time=toISOString(n[strBaseData].startTime)),r.iKey=n.iKey,t=n.iKey.replace(/-/g,"");return r[_DYN_NAME]=r[_DYN_NAME].replace("{0}",t),_extractPartAExtensions(e,n,r),n[_DYN_TAGS]=n[_DYN_TAGS]||[],optimizeObject(r)}function EnvelopeCreatorInit(e,t){isNullOrUndefined(t[strBaseData])&&_throwInternal(e,1,46,"telemetryItem.baseData cannot be null.")}var EnvelopeCreator={Version:"3.0.4"};function DependencyEnvelopeCreator(e,t,n){EnvelopeCreatorInit(e,t);var r=t[strBaseData][_DYN_MEASUREMENTS]||{},o=t[strBaseData][strProperties]||{},n=(_extractPropsAndMeasurements(t[_DYN_DATA],o,r),isNullOrUndefined(n)||_convertPropsUndefinedToCustomDefinedValue(o,n),t[strBaseData]);if(isNullOrUndefined(n))return _warnToConsole(e,"Invalid input for dependency data"),null;var i=n[strProperties]&&n[strProperties][HttpMethod]?n[strProperties][HttpMethod]:"GET",i=new RemoteDependencyData(e,n.id,n.target,n[_DYN_NAME],n[STR_DURATION],n.success,n.responseCode,i,n.type,n.correlationContext,o,r),n=new Data(RemoteDependencyData[_DYN_DATA_TYPE],i);return _createEnvelope(e,RemoteDependencyData[_DYN_ENVELOPE_TYPE],t,n)}function EventEnvelopeCreator(e,t,n){EnvelopeCreatorInit(e,t);var r={},o={},n=(t[strBaseType]!==Event$1[_DYN_DATA_TYPE]&&(r.baseTypeSource=t[strBaseType]),t[strBaseType]===Event$1[_DYN_DATA_TYPE]?(r=t[strBaseData][strProperties]||{},o=t[strBaseData][_DYN_MEASUREMENTS]||{}):t[strBaseData]&&_extractPropsAndMeasurements(t[strBaseData],r,o),_extractPropsAndMeasurements(t[_DYN_DATA],r,o),isNullOrUndefined(n)||_convertPropsUndefinedToCustomDefinedValue(r,n),t[strBaseData][_DYN_NAME]),n=new Event$1(e,n,r,o),r=new Data(Event$1[_DYN_DATA_TYPE],n);return _createEnvelope(e,Event$1[_DYN_ENVELOPE_TYPE],t,r)}function ExceptionEnvelopeCreator(e,t,n){EnvelopeCreatorInit(e,t);var r=t[strBaseData][_DYN_MEASUREMENTS]||{},o=t[strBaseData][strProperties]||{},n=(_extractPropsAndMeasurements(t[_DYN_DATA],o,r),isNullOrUndefined(n)||_convertPropsUndefinedToCustomDefinedValue(o,n),t[strBaseData]),n=Exception.CreateFromInterface(e,n,o,r),o=new Data(Exception[_DYN_DATA_TYPE],n);return _createEnvelope(e,Exception[_DYN_ENVELOPE_TYPE],t,o)}function MetricEnvelopeCreator(e,t,n){EnvelopeCreatorInit(e,t);var r=t[strBaseData],o=r[strProperties]||{},i=r[_DYN_MEASUREMENTS]||{},n=(_extractPropsAndMeasurements(t[_DYN_DATA],o,i),isNullOrUndefined(n)||_convertPropsUndefinedToCustomDefinedValue(o,n),new Metric(e,r[_DYN_NAME],r.average,r.sampleCount,r.min,r.max,r.stdDev,o,i)),r=new Data(Metric[_DYN_DATA_TYPE],n);return _createEnvelope(e,Metric[_DYN_ENVELOPE_TYPE],t,r)}function PageViewEnvelopeCreator(e,t,n){EnvelopeCreatorInit(e,t);var r,o=t[strBaseData],o=(isNullOrUndefined(o)||isNullOrUndefined(o[strProperties])||isNullOrUndefined(o[strProperties][STR_DURATION])?isNullOrUndefined(t[_DYN_DATA])||isNullOrUndefined(t[_DYN_DATA][STR_DURATION])||(r=t[_DYN_DATA][STR_DURATION],delete t[_DYN_DATA][STR_DURATION]):(r=o[strProperties][STR_DURATION],delete o[strProperties][STR_DURATION]),t[strBaseData]),i=(((t.ext||{}).trace||{})[_DYN_TRACE_ID]&&(i=t.ext.trace[_DYN_TRACE_ID]),o.id||i),a=o[_DYN_NAME],_=o.uri,s=o[strProperties]||{},c=o[_DYN_MEASUREMENTS]||{},o=(isNullOrUndefined(o.refUri)||(s.refUri=o.refUri),isNullOrUndefined(o.pageType)||(s.pageType=o.pageType),isNullOrUndefined(o.isLoggedIn)||(s.isLoggedIn=o.isLoggedIn[_DYN_TO_STRING]()),isNullOrUndefined(o[strProperties])||objForEachKey(o[strProperties],function(e,t){s[e]=t}),_extractPropsAndMeasurements(t[_DYN_DATA],s,c),isNullOrUndefined(n)||_convertPropsUndefinedToCustomDefinedValue(s,n),new PageView(e,a,_,r,s,c,i)),n=new Data(PageView[_DYN_DATA_TYPE],o);return _createEnvelope(e,PageView[_DYN_ENVELOPE_TYPE],t,n)}function PageViewPerformanceEnvelopeCreator(e,t,n){EnvelopeCreatorInit(e,t);var r=t[strBaseData],o=r[_DYN_NAME],i=r.uri||r.url,a=r[strProperties]||{},_=r[_DYN_MEASUREMENTS]||{},n=(_extractPropsAndMeasurements(t[_DYN_DATA],a,_),isNullOrUndefined(n)||_convertPropsUndefinedToCustomDefinedValue(a,n),new PageViewPerformance(e,o,i,undefined,a,_,r)),o=new Data(PageViewPerformance[_DYN_DATA_TYPE],n);return _createEnvelope(e,PageViewPerformance[_DYN_ENVELOPE_TYPE],t,o)}function TraceEnvelopeCreator(e,t,n){EnvelopeCreatorInit(e,t);var r=t[strBaseData].message,o=t[strBaseData].severityLevel,i=t[strBaseData][strProperties]||{},a=t[strBaseData][_DYN_MEASUREMENTS]||{},n=(_extractPropsAndMeasurements(t[_DYN_DATA],i,a),isNullOrUndefined(n)||_convertPropsUndefinedToCustomDefinedValue(i,n),new Trace(e,r,o,i,a)),r=new Data(Trace[_DYN_DATA_TYPE],n);return _createEnvelope(e,Trace[_DYN_ENVELOPE_TYPE],t,r)}function _disableEvents(e,t){eventOff(e,null,null,t)}function createOfflineListener(e){var t,n=getDocument(),r=getNavigator(),o=!1,i=!0,a=mergeEvtNamespace(createUniqueNamespace("OfflineListener"),e);try{_(getWindow())&&(o=!0),(o=!!(n&&(t=n.body||n).ononline&&_(t))||o)&&r&&!isNullOrUndefined(r[_DYN_ON_LINE])&&(i=r[_DYN_ON_LINE])}catch(u){o=!1}function _(e){var t=!1;return e&&(t=eventOn(e,"online",s,a))&&eventOn(e,"offline",c,a),t}function s(){i=!0}function c(){i=!1}return(e={})[_DYN_IS_ONLINE]=function(){var e=!0;return o?e=i:r&&!isNullOrUndefined(r[_DYN_ON_LINE])&&(e=r[_DYN_ON_LINE]),e},e.isListening=function(){return o},e.unload=function(){var e=getWindow();e&&o&&(_disableEvents(e,a),n&&!isUndefined((e=n.body||n).ononline)&&_disableEvents(e,a),o=!1)},e}var _a,_b,BaseSendBuffer=function(){function e(i,n){var a=[],r=!1;this[_DYN__GET]=function(){return a},this._set=function(e){return a=e},dynamicProto(e,this,function(t){t[_DYN_ENQUEUE]=function(e){t[_DYN_COUNT]()>=n[_DYN_EVENTS_LIMIT_IN_MEM]?r||(_throwInternal(i,2,105,"Maximum in-memory buffer size reached: "+t[_DYN_COUNT](),!0),r=!0):a[_DYN_PUSH](e)},t[_DYN_COUNT]=function(){return a[_DYN_LENGTH]},t.size=function(){for(var e=a[_DYN_LENGTH],t=0;t<a[_DYN_LENGTH];t++)e+=a[t][_DYN_LENGTH];return n[_DYN_EMIT_LINE_DELIMITED_0]||(e+=2),e},t[_DYN_CLEAR]=function(){r=!(a=[])},t.getItems=function(){return a.slice(0)},t[_DYN_BATCH_PAYLOADS]=function(e){return e&&0<e[_DYN_LENGTH]?n[_DYN_EMIT_LINE_DELIMITED_0]?e.join("\n"):"["+e.join(",")+"]":null},t[_DYN_CREATE_NEW]=function(e,t,n){var r=a.slice(0),o=new(n?SessionStorageSendBuffer:ArraySendBuffer)(e=e||i,t=t||{});return arrForEach(r,function(e){o[_DYN_ENQUEUE](e)}),o}})}return e.__ieDyn=1,e}(),ArraySendBuffer=function(n){function r(e,t){e=n.call(this,e,t)||this;return dynamicProto(r,e,function(e,t){e[_DYN_MARK_AS_SENT]=function(e){t[_DYN_CLEAR]()},e[_DYN_CLEAR_SENT]=function(e){}}),e}return __extendsFn(r,n),r.__ieDyn=1,r}(BaseSendBuffer),SessionStorageSendBuffer=function(n){function N(s,e){var t=n.call(this,s,e)||this,i=!1,c=null==e?void 0:e.namePrefix,e=e[_DYN_BUFFER_OVERRIDE]||{getItem:utlGetSessionStorage,setItem:utlSetSessionStorage},u=e.getItem,l=e.setItem;return dynamicProto(N,t,function(a,t){var e=_(N[_DYN__BUFFER__KEY]),n=_(N[_DYN__SENT__BUFFER__KEY]),n=a._set(e.concat(n));function r(t,e){var n=[];return arrForEach(e,function(e){isFunction(e)||-1!==arrIndexOf(t,e)||n[_DYN_PUSH](e)}),n}function _(e){try{var t=u(s,e=c?c+"_"+e:e);if(t){var n=getJSON().parse(t);if((n=isString(n)?getJSON().parse(n):n)&&isArray(n))return n}}catch(r){_throwInternal(s,1,42," storage key: "+e+", "+getExceptionName(r),{exception:dumpObj(r)})}return[]}function o(e,t){try{var e=c?c+"_"+e:e,n=JSON[_DYN_STRINGIFY](t);l(s,e,n)}catch(r){l(s,e,JSON[_DYN_STRINGIFY]([])),_throwInternal(s,2,41," storage key: "+e+", "+getExceptionName(r)+". Buffer cleared",{exception:dumpObj(r)})}}n[_DYN_LENGTH]>N[_DYN__MAX__BUFFER__SIZE]&&(n[_DYN_LENGTH]=N[_DYN__MAX__BUFFER__SIZE]),o(N[_DYN__SENT__BUFFER__KEY],[]),o(N[_DYN__BUFFER__KEY],n),a[_DYN_ENQUEUE]=function(e){a[_DYN_COUNT]()>=N[_DYN__MAX__BUFFER__SIZE]?i||(_throwInternal(s,2,67,"Maximum buffer size reached: "+a[_DYN_COUNT](),!0),i=!0):(t[_DYN_ENQUEUE](e),o(N.BUFFER_KEY,a[_DYN__GET]()))},a[_DYN_CLEAR]=function(){t[_DYN_CLEAR](),o(N.BUFFER_KEY,a[_DYN__GET]()),o(N[_DYN__SENT__BUFFER__KEY],[]),i=!1},a[_DYN_MARK_AS_SENT]=function(e){o(N[_DYN__BUFFER__KEY],a._set(r(e,a[_DYN__GET]())));var t=_(N[_DYN__SENT__BUFFER__KEY]);t instanceof Array&&e instanceof Array&&((t=t.concat(e))[_DYN_LENGTH]>N[_DYN__MAX__BUFFER__SIZE]&&(_throwInternal(s,1,67,"Sent buffer reached its maximum size: "+t[_DYN_LENGTH],!0),t[_DYN_LENGTH]=N[_DYN__MAX__BUFFER__SIZE]),o(N[_DYN__SENT__BUFFER__KEY],t))},a[_DYN_CLEAR_SENT]=function(e){e=r(e,_(N[_DYN__SENT__BUFFER__KEY]));o(N[_DYN__SENT__BUFFER__KEY],e)},a[_DYN_CREATE_NEW]=function(e,t,n){n=!!n;var r=a[_DYN__GET]().slice(0),o=_(N[_DYN__SENT__BUFFER__KEY]).slice(0),i=(e=e||s,t=t||{},a[_DYN_CLEAR](),new(n?N:ArraySendBuffer)(e,t));return arrForEach(r,function(e){i[_DYN_ENQUEUE](e)}),n&&i[_DYN_MARK_AS_SENT](o),i}}),t}return __extendsFn(N,n),N.BUFFER_KEY="AI_buffer",N.SENT_BUFFER_KEY="AI_sentBuffer",N.MAX_BUFFER_SIZE=2e3,N}(BaseSendBuffer),Serializer=function(){function e(l){dynamicProto(e,this,function(e){function c(a,_){var e="__aiCircularRefCheck",s={};if(!a)return _throwInternal(l,1,48,"cannot serialize object because it is null or undefined",{name:_},!0),s;if(a[e])return _throwInternal(l,2,50,"Circular reference detected while serializing object",{name:_},!0),s;if(a.aiDataContract)return a[e]=!0,objForEachKey(a.aiDataContract,function(e,t){var n=isFunction(t)?1&t():1&t,r=isFunction(t)?4&t():4&t,t=2&t,o=a[e]!==undefined,i=isObject(a[e])&&null!==a[e];!n||o||t?r||(n=i?(t?u:c)(a[e],e):a[e])!==undefined&&(s[e]=n):_throwInternal(l,1,24,"Missing required field specification. The field is required but not present on source",{field:e,name:_})}),delete a[e],s;if("measurements"===_)s=n(a,"number",_);else if("properties"===_)s=n(a,"string",_);else if("tags"===_)s=n(a,"string",_);else if(isArray(a))s=u(a,_);else{_throwInternal(l,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:_},!0);try{getJSON()[_DYN_STRINGIFY](a),s=a}catch(t){_throwInternal(l,1,48,t&&isFunction(t[_DYN_TO_STRING])?t[_DYN_TO_STRING]():"Error serializing object",null,!0)}}return s}function u(e,t){if(e)if(isArray(e))for(var n=[],r=0;r<e[_DYN_LENGTH];r++){var o=c(e[r],t+"["+r+"]");n[_DYN_PUSH](o)}else _throwInternal(l,1,54,"This field was specified as an array in the contract but the item is not an array.\r\n",{name:t},!0);return n}function n(e,n,r){var o;return e&&(o={},objForEachKey(e,function(e,t){"string"===n?t===undefined?o[e]="undefined":null===t?o[e]="null":t[_DYN_TO_STRING]?o[e]=t[_DYN_TO_STRING]():o[e]="invalid field: toString() is not defined.":"number"===n?t===undefined?o[e]="undefined":o[e]=null===t?"null":isNaN(t=parseFloat(t))?"NaN":t:(o[e]="invalid field: "+r+" is of unknown type.",_throwInternal(l,1,o[e],null,!0))})),o}e.serialize=function(e){e=c(e,"root");try{return getJSON()[_DYN_STRINGIFY](e)}catch(t){_throwInternal(l,1,48,t&&isFunction(t[_DYN_TO_STRING])?t[_DYN_TO_STRING]():"Error serializing object",null,!0)}}})}return e.__ieDyn=1,e}(),MIN_INPUT_LENGTH=8,HashCodeScoreGenerator=function(){function t(){}return t.prototype.getHashCodeScore=function(e){return this.getHashCode(e)/t.INT_MAX_VALUE*100},t.prototype.getHashCode=function(e){if(""===e)return 0;for(;e[_DYN_LENGTH]<MIN_INPUT_LENGTH;)e=e.concat(e);for(var t=5381,n=0;n<e[_DYN_LENGTH];++n)t=(t<<5)+t+e.charCodeAt(n),t&=t;return Math.abs(t)},t.INT_MAX_VALUE=2147483647,t}(),SamplingScoreGenerator=function(){var t=new HashCodeScoreGenerator,n=new ContextTagKeys;this[_DYN_GET_SAMPLING_SCORE]=function(e){return e[_DYN_TAGS]&&e[_DYN_TAGS][n.userId]?t.getHashCodeScore(e[_DYN_TAGS][n.userId]):e.ext&&e.ext.user&&e.ext.user.id?t[_DYN_GET_HASH_CODE_SCORE](e.ext.user.id):e[_DYN_TAGS]&&e[_DYN_TAGS][n.operationId]?t.getHashCodeScore(e[_DYN_TAGS][n.operationId]):e.ext&&e.ext.telemetryTrace&&e.ext.telemetryTrace[_DYN_TRACE_ID]?t.getHashCodeScore(e.ext.telemetryTrace[_DYN_TRACE_ID]):100*Math.random()}},Sample=function(){function e(e,t){this.INT_MAX_VALUE=2147483647;t=t||safeGetLogger(null);(100<e||e<0)&&(t.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this[_DYN_SAMPLE_RATE]=e,this.samplingScoreGenerator=new SamplingScoreGenerator}return e.prototype.isSampledIn=function(e){var t=this[_DYN_SAMPLE_RATE];return null===t||t===undefined||100<=t||e.baseType===Metric[_DYN_DATA_TYPE]||this.samplingScoreGenerator[_DYN_GET_SAMPLING_SCORE](e)<t},e}(),UNDEFINED_VALUE=undefined,FetchSyncRequestSizeLimitBytes=65e3;function _getResponseText(e){try{return e.responseText}catch(t){}return null}function isOverrideFn(e){return e&&e[_DYN_SEND_POST]}var defaultAppInsightsChannelConfig=objDeepFreeze(((_a={endpointUrl:cfgDfValidate(isTruthy,DEFAULT_BREEZE_ENDPOINT+DEFAULT_BREEZE_PATH)})[_DYN_EMIT_LINE_DELIMITED_0]=cfgDfBoolean(),_a[_DYN_MAX_BATCH_INTERVAL]=15e3,_a[_DYN_MAX_BATCH_SIZE_IN_BY1]=102400,_a.disableTelemetry=cfgDfBoolean(),_a[_DYN_ENABLE_SESSION_STORA5]=cfgDfBoolean(!0),_a.isRetryDisabled=cfgDfBoolean(),_a[_DYN_IS_BEACON_API_DISABL3]=cfgDfBoolean(!0),_a.disableXhr=cfgDfBoolean(),_a[_DYN_ONUNLOAD_DISABLE_FET6]=cfgDfBoolean(),_a[_DYN_ONUNLOAD_DISABLE_BEA2]=cfgDfBoolean(),_a[_DYN_INSTRUMENTATION_KEY$1]=UNDEFINED_VALUE,_a.namePrefix=UNDEFINED_VALUE,_a.samplingPercentage=cfgDfValidate(_chkSampling,100),_a[_DYN_CUSTOM_HEADERS]=UNDEFINED_VALUE,_a[_DYN_CONVERT_UNDEFINED]=UNDEFINED_VALUE,_a[_DYN_EVENTS_LIMIT_IN_MEM]=1e4,_a[_DYN_BUFFER_OVERRIDE]=!1,_a.httpXHROverride={isVal:isOverrideFn,v:UNDEFINED_VALUE},_a[_DYN_ALWAYS_USE_XHR_OVERR4]=cfgDfBoolean(),_a));function _chkSampling(e){return!isNaN(e)&&0<e&&e<=100}(_b={})[Event$1.dataType]=EventEnvelopeCreator,_b[Trace.dataType]=TraceEnvelopeCreator,_b[PageView.dataType]=PageViewEnvelopeCreator,_b[PageViewPerformance.dataType]=PageViewPerformanceEnvelopeCreator,_b[Exception.dataType]=ExceptionEnvelopeCreator,_b[Metric.dataType]=MetricEnvelopeCreator,_b[RemoteDependencyData.dataType]=DependencyEnvelopeCreator;var EnvelopeTypeCreator=_b,Sender=function(e){function oe(){var v,h,L,o,b,i,U,F,G,M,w,x,H,j,V,k,B,$,K,z,X,W,q,Z,J,Q,ee,te,ne=e.call(this)||this,re=(ne.priority=1001,ne.identifier=BreezeChannelIdentifier,0);return dynamicProto(oe,ne,function(E,r){function f(e,t){for(var n,r,o=null,i=0;null==o&&i<e[_DYN_LENGTH];)r=e[i],Q||1!==r?2===r&&isFetchSupported(t)?o=s:isBeaconsSupported()&&3===r&&(o=l):useXDomainRequest()?o=C:isXhrSupported()&&(o=p),i++;return o?((n={})[_DYN_SEND_POST]=o,n):null}function a(e,t,n,r){200===t&&e&&E._onSuccess(e,e[_DYN_LENGTH]),r&&E[_DYN__ON_ERROR](e,r)}function D(e,r,t){var n=_(r),e=e&&e[_DYN_SEND_POST];return e&&n?(E._buffer[_DYN_MARK_AS_SENT](r),e(n,function(e,t,n){return a(r,e,0,n)},!t)):null}function _(e){var t,n;return isArray(e)&&0<e[_DYN_LENGTH]?(n=E._buffer[_DYN_BATCH_PAYLOADS](e),(t={})[_DYN_DATA]=n,t.urlString=w,t.headers=U,t.disableXhrSync=Q,t.disableFetchKeepAlive=!ee,t[_DYN_ORI_PAYLOAD]=e,t):null}function s(e,t,n){return N(e,t,!1)}function d(e){e=e?e[_DYN_LENGTH]:0;E[_DYN__BUFFER].size()+e>H&&(G&&!G[_DYN_IS_ONLINE]()||E[_DYN_TRIGGER_SEND](!0,null,10))}function T(e,t,n,r,o,i){var a=null;E._appId||(a=Y(i))&&a.appId&&(E._appId=a.appId),(e<200||300<=e)&&0!==e?(301!==e&&307!==e&&308!==e||c(n))&&!K&&m(e)?(I(t),_throwInternal(E[_DYN_DIAG_LOG](),2,40,". Response code "+e+". Will retry to send "+t[_DYN_LENGTH]+" items.")):E[_DYN__ON_ERROR](t,o):G&&!G[_DYN_IS_ONLINE]()?K||(I(t,10),_throwInternal(E[_DYN_DIAG_LOG](),2,40,". Offline - Response Code: ".concat(e,". Offline status: ").concat(!G.isOnline(),". Will retry to send ").concat(t.length," items."))):(c(n),206===e?(a=a||Y(i))&&!K?E[_DYN__ON_PARTIAL_SUCCESS](t,a):E[_DYN__ON_ERROR](t,o):(v=0,E[_DYN__ON_SUCCESS](t,r)))}function c(e){return!(10<=i)&&!isNullOrUndefined(e)&&""!==e&&e!==w&&(w=e,++i,1)}function S(e,t,n,r){try{e(t,n,r)}catch(o){}}function t(r,e){F?F(r,!1):l(_(r),function(e,t,n){return a(r,e,0,n)})}function u(e,t){var n=getNavigator(),r=w,o=new Blob([e],{type:"text/plain;charset=UTF-8"}),r=n.sendBeacon(r,o);return r&&t(200,{},e),r}function l(e,t,n){var r=e,o=r&&r[_DYN_DATA];if(isString(o)&&0<o[_DYN_LENGTH]&&!u(o,t)){var i=[];if(0<r[_DYN_ORI_PAYLOAD][_DYN_LENGTH])for(var a=0;a<o[_DYN_LENGTH];a++){var _=e[a];u(E._buffer[_DYN_BATCH_PAYLOADS](_),t)||i[_DYN_PUSH](_)}0<i[_DYN_LENGTH]&&(te&&te(i,!0),_throwInternal(E[_DYN_DIAG_LOG](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}function p(e,t,n){var r,o,i,a=e,_=new XMLHttpRequest,s=w;try{_[DisabledPropertyName]=!0}catch(c){}return _.open("POST",s,!n),_[_DYN_SET_REQUEST_HEADER]("Content-type","application/json"),isInternalApplicationInsightsEndpoint(s)&&_[_DYN_SET_REQUEST_HEADER](RequestHeaders[6],RequestHeaders[7]),arrForEach(objKeys(U),function(e){_[_DYN_SET_REQUEST_HEADER](e,U[e])}),_.onreadystatechange=function(){var e=a[_DYN_ORI_PAYLOAD];E._xhrReadyStateChange(_,e,e[_DYN_LENGTH]),4===_.readyState&&o&&o(!0)},_.onerror=function(e){S(t,400,{},O(_)),i&&i(e)},!n&&Z&&(r=createPromise(function(e,t){o=e,i=t})),_.send(e[_DYN_DATA]),r}function g(r,e){var t=function(e,t,n){return a(r,e,0,n)};if(isArray(r)){for(var n=r[_DYN_LENGTH],o=0;o<r[_DYN_LENGTH];o++)n+=r[o][_DYN_LENGTH];var i=_(r);re+n<=FetchSyncRequestSizeLimitBytes?N(i,t,!0):isBeaconsSupported()?l(i,t):(te&&te(r,!0),_throwInternal(E[_DYN_DIAG_LOG](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."))}}function N(e,t,r){var n,o,i,a=w,_=e,e=_[_DYN_DATA],s=new Blob([e],{type:"application/json"}),c=new Headers,u=e[_DYN_LENGTH],e=!1,l=!1,a=(isInternalApplicationInsightsEndpoint(a)&&c.append(RequestHeaders[6],RequestHeaders[7]),arrForEach(objKeys(U),function(e){c.append(e,U[e])}),(s={method:"POST",headers:c,body:s})[DisabledPropertyName]=!0,r&&(e=s.keepalive=!0,re+=u),new Request(a,s));try{a[DisabledPropertyName]=!0}catch(N){}!r&&Z&&(n=createPromise(function(e,t){o=e,i=t}));try{doAwaitResponse(fetch(a),function(e){var n;r&&(re-=u,u=0),l||(l=!0,e.rejected?(S(t,400,{},e.reason&&e.reason.message),i&&i(e.reason)):(n=e.value).ok?doAwaitResponse(n.text(),function(e){var t=_[_DYN_ORI_PAYLOAD];T(n.status,t,n.url,t[_DYN_LENGTH],n.statusText,e.value||""),o&&o(!0)}):(S(t,400,{},n.statusText),o&&o(!1)))})}catch(N){l||(S(t,400,{},dumpObj(N)),i&&i(N))}return e&&!l&&(l=!0,S(t,200,{}),o&&o(!0)),n}function Y(e){try{if(e&&""!==e){var t=getJSON().parse(e);if(t&&t.itemsReceived&&t.itemsReceived>=t[_DYN_ITEMS_ACCEPTED]&&t.itemsReceived-t.itemsAccepted===t.errors[_DYN_LENGTH])return t}}catch(n){_throwInternal(E[_DYN_DIAG_LOG](),1,43,"Cannot parse the response. "+getExceptionName(n),{response:e})}return null}function I(e,t){if(void 0===t&&(t=1),e&&0!==e[_DYN_LENGTH]){var n=E[_DYN__BUFFER];n[_DYN_CLEAR_SENT](e),v++;for(var r=0,o=e;r<o.length;r++){var i=o[r];n[_DYN_ENQUEUE](i)}t=v<=1?10:(e=1+Math.floor((Math.pow(2,v)-1)/2*Math.random()*10),Math.max(Math.min(e*=t,3600),10)),e=utcNow()+1e3*t;h=e,y()}}function y(){var e;o||L||(e=h?Math.max(0,h-utcNow()):0,o=scheduleTimeout(function(){o=null,E[_DYN_TRIGGER_SEND](!0,null,1)},Math.max(z,e)))}function A(){o&&o.cancel(),h=o=null}function m(e){return 401===e||403===e||408===e||429===e||500===e||502===e||503===e||504===e}function O(e,t){return e?"XMLHttpRequest,Status:"+e.status+",Response:"+_getResponseText(e)||e.response||"":t}function C(e,t,n){var r=e,e=getWindow(),o=new XDomainRequest,i=r[_DYN_DATA],e=(o.onload=function(){var e=r[_DYN_ORI_PAYLOAD];E._xdrOnLoad(o,e)},o.onerror=function(){S(t,400,{},P(o))},e&&e.location&&e.location.protocol||"");if(w.lastIndexOf(e,0))return _throwInternal(E[_DYN_DIAG_LOG](),2,40,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),void E._buffer[_DYN_CLEAR]();e=w.replace(/^(https?:)/,"");o.open("POST",e),o.send(i)}function P(e,t){return e?"XDomainRequest,Response:"+_getResponseText(e)||"":t}function R(e,t){var n="getNotifyMgr",n=E.core[n]?E.core[n]():E.core._notificationManager;if(n&&n[_DYN_EVENTS_SEND_REQUEST])try{n[_DYN_EVENTS_SEND_REQUEST](e,t)}catch(r){_throwInternal(E[_DYN_DIAG_LOG](),1,74,"send request notification failed: "+getExceptionName(r),{exception:dumpObj(r)})}}function n(){E[_DYN__SENDER]=null,E[_DYN__BUFFER]=null,E._appId=null,E._sample=null,H=re=i=v=0,q=$=UNDEFINED_VALUE,ee=Q=K=k=j=L=!(U={}),te=X=B=V=x=w=M=F=b=o=h=G=null,objDefine(E,"_senderConfig",{g:function(){return objExtend({},defaultAppInsightsChannelConfig)}})}n(),E.pause=function(){A(),L=!0},E.resume=function(){L&&(L=!1,h=null,d(),y())},E.flush=function(e,t,n){if(void 0===e&&(e=!0),!L){A();try{return E[_DYN_TRIGGER_SEND](e,null,n||1)}catch(r){_throwInternal(E[_DYN_DIAG_LOG](),1,22,"flush failed, telemetry will not be collected: "+getExceptionName(r),{exception:dumpObj(r)})}}},E.onunloadFlush=function(){if(!L)if(j||J)try{return E[_DYN_TRIGGER_SEND](!0,t,2)}catch(e){_throwInternal(E[_DYN_DIAG_LOG](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+getExceptionName(e),{exception:dumpObj(e)})}else E.flush(!1)},E.addHeader=function(e,t){U[e]=t},E.initialize=function(e,u,t,n){E.isInitialized()&&_throwInternal(E[_DYN_DIAG_LOG](),1,28,"Sender is already initialized"),r.initialize(e,u,t,n);var l=E.identifier,N=(b=new Serializer(u.logger),v=0,h=null,E[_DYN__SENDER]=null,i=0,E[_DYN_DIAG_LOG]());M=mergeEvtNamespace(createUniqueNamespace("Sender"),u.evtNamespace&&u.evtNamespace()),G=createOfflineListener(M),E._addHook(onConfigChange(e,function(e){var e=e.cfg,t=(e.storagePrefix&&utlSetStoragePrefix(e.storagePrefix),createProcessTelemetryContext(null,e,u).getExtCfg(l,defaultAppInsightsChannelConfig)),n=(objDefine(E,"_senderConfig",{g:function(){return t}}),x!==t.endpointUrl&&(w=x=t.endpointUrl),V&&V!==t[_DYN_CUSTOM_HEADERS]&&arrForEach(V,function(e){delete U[e.header]}),H=t[_DYN_MAX_BATCH_SIZE_IN_BY1],j=(!1===t[_DYN_ONUNLOAD_DISABLE_BEA2]||!1===t[_DYN_IS_BEACON_API_DISABL3])&&isBeaconsSupported(),J=t[_DYN_ALWAYS_USE_XHR_OVERR4],Q=!!t.disableXhr,t[_DYN_BUFFER_OVERRIDE]),r=!!t[_DYN_ENABLE_SESSION_STORA5]&&(!!n||utlCanUseSessionStorage()),o=t.namePrefix,i=r!==X||r&&q!==o||r&&W!==n;if(E[_DYN__BUFFER]){if(i)try{E._buffer=E._buffer[_DYN_CREATE_NEW](N,t,r)}catch(c){_throwInternal(E[_DYN_DIAG_LOG](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+getExceptionName(c),{exception:dumpObj(c)})}d()}else E[_DYN__BUFFER]=new(r?SessionStorageSendBuffer:ArraySendBuffer)(N,t);q=o,X=r,W=n,ee=!t[_DYN_ONUNLOAD_DISABLE_FET6]&&isFetchSupported(!0),E._sample=new Sample(t.samplingPercentage,N),i=B=t[_DYN_INSTRUMENTATION_KEY$1],!isNullOrUndefined(o=e.disableInstrumentationKeyValidation)&&o||/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/.test(i)||_throwInternal(N,1,100,"Invalid Instrumentation key "+B),V=t[_DYN_CUSTOM_HEADERS],!isInternalApplicationInsightsEndpoint(w)&&V&&0<V[_DYN_LENGTH]?arrForEach(V,function(e){ne.addHeader(e.header,e.value)}):V=null,Z=t.enableSendPromise;var a,r=t.httpXHROverride,_=null,_=f([1,2],!1),s={sendPOST:p};te=function(e,t){return D(s,e,t)},!t[_DYN_IS_BEACON_API_DISABL3]&&isBeaconsSupported()&&(_=f([3],!1)),_=J?r:_||r||s,E[_DYN__SENDER]=function(e,t){return D(_,e,t)},ee&&(F=g),a=!J&&f([3,1],!0)||r,F=(F=!J&&F||!a?F:function(e,t){return D(a,e,t)})||te,k=t.disableTelemetry,$=t[_DYN_CONVERT_UNDEFINED]||UNDEFINED_VALUE,K=t.isRetryDisabled,z=t[_DYN_MAX_BATCH_INTERVAL]}))},E.processTelemetry=function(e,t){var n=(t=E._getTelCtx(t))[_DYN_DIAG_LOG]();try{if(k)return;if(!e)return void _throwInternal(n,1,7,"Cannot send empty telemetry");if(e.baseData&&!e[_DYN_BASE_TYPE])return void _throwInternal(n,1,70,"Cannot send telemetry without baseData and baseType");if(e[_DYN_BASE_TYPE]||(e[_DYN_BASE_TYPE]="EventData"),!E[_DYN__SENDER])return void _throwInternal(n,1,28,"Sender was not initialized");if(!E._sample.isSampledIn(e))return void _throwInternal(n,2,33,"Telemetry item was sampled out and not sent",{SampleRate:E._sample[_DYN_SAMPLE_RATE]});e[SampleRate]=E._sample[_DYN_SAMPLE_RATE];var r=e.iKey||B,o=oe.constructEnvelope(e,r,n,$);if(!o)return void _throwInternal(n,1,47,"Unable to create an AppInsights envelope");var i=!1;if(e[_DYN_TAGS]&&e[_DYN_TAGS][ProcessLegacy]&&(arrForEach(e[_DYN_TAGS][ProcessLegacy],function(e){try{e&&!1===e(o)&&(i=!0,_warnToConsole(n,"Telemetry processor check returns false"))}catch(t){_throwInternal(n,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+getExceptionName(t),{exception:dumpObj(t)},!0)}}),delete e[_DYN_TAGS][ProcessLegacy]),i)return;var a=b.serialize(o),_=E[_DYN__BUFFER];d(a),_[_DYN_ENQUEUE](a),y()}catch(s){_throwInternal(n,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+getExceptionName(s),{exception:dumpObj(s)})}E.processNext(e,t)},E[_DYN__XHR_READY_STATE_CHA7]=function(e,t,n){4===e.readyState&&T(e.status,t,e.responseURL,n,O(e),_getResponseText(e)||e.response)},E[_DYN_TRIGGER_SEND]=function(e,t,n){var r;if(void 0===e&&(e=!0),!L)try{var o,i=E[_DYN__BUFFER];k?i[_DYN_CLEAR]():0<i[_DYN_COUNT]()&&(o=i.getItems(),R(n||0,e),r=t?t.call(E,o,e):E[_DYN__SENDER](o,e)),A()}catch(a){i=getIEVersion();(!i||9<i)&&_throwInternal(E[_DYN_DIAG_LOG](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+getExceptionName(a),{exception:dumpObj(a)})}return r},E._doTeardown=function(e,t){E.onunloadFlush(),runTargetUnload(G,!1),n()},E[_DYN__ON_ERROR]=function(e,t,n){_throwInternal(E[_DYN_DIAG_LOG](),2,26,"Failed to send telemetry.",{message:t}),E._buffer&&E._buffer[_DYN_CLEAR_SENT](e)},E[_DYN__ON_PARTIAL_SUCCESS]=function(e,t){for(var n=[],r=[],o=0,i=t.errors.reverse();o<i.length;o++){var a=i[o],_=e.splice(a.index,1)[0];(m(a.statusCode)?r:n)[_DYN_PUSH](_)}0<e[_DYN_LENGTH]&&E[_DYN__ON_SUCCESS](e,t[_DYN_ITEMS_ACCEPTED]),0<n[_DYN_LENGTH]&&E[_DYN__ON_ERROR](n,O(null,["partial success",t[_DYN_ITEMS_ACCEPTED],"of",t.itemsReceived].join(" "))),0<r[_DYN_LENGTH]&&(I(r),_throwInternal(E[_DYN_DIAG_LOG](),2,40,"Partial success. Delivered: "+e[_DYN_LENGTH]+", Failed: "+n[_DYN_LENGTH]+". Will retry to send "+r[_DYN_LENGTH]+" our of "+t[_DYN_ITEMS_RECEIVED]+" items"))},E[_DYN__ON_SUCCESS]=function(e,t){E._buffer&&E._buffer[_DYN_CLEAR_SENT](e)},E._xdrOnLoad=function(e,t){var n=_getResponseText(e);!e||n+""!="200"&&""!==n?(n=Y(n))&&n.itemsReceived&&n.itemsReceived>n[_DYN_ITEMS_ACCEPTED]&&!K?E[_DYN__ON_PARTIAL_SUCCESS](t,n):E[_DYN__ON_ERROR](t,P(e)):(v=0,E[_DYN__ON_SUCCESS](t,0))}}),ne}return __extendsFn(oe,e),oe.constructEnvelope=function(e,t,n,r){e=t===e.iKey||isNullOrUndefined(t)?e:__assignFn(__assignFn({},e),{iKey:t});return(EnvelopeTypeCreator[e.baseType]||EventEnvelopeCreator)(n,e,r)},oe}(BaseTelemetryPlugin),_DYN_INSTRUMENTATION_KEY="instrumentationKey",_DYN_CONNECTION_STRING="connectionString",defaultConfigValues={diagnosticLogInterval:cfgDfValidate(_chkDiagLevel,1e4)};function _chkDiagLevel(e){return e&&0<e}var ApplicationInsights=function(){function e(n){var r,o=new AppInsightsCore;(isNullOrUndefined(n)||isNullOrUndefined(n[_DYN_INSTRUMENTATION_KEY])&&isNullOrUndefined(n[_DYN_CONNECTION_STRING]))&&throwError("Invalid input configuration"),dynamicProto(e,this,function(e){function t(){var e=createDynamicConfig(n||{},defaultConfigValues);r=e.cfg,o.addUnloadHook(onConfigChange(e,function(){var e,t;r[_DYN_CONNECTION_STRING]&&(t=(e=parseConnectionString(r[_DYN_CONNECTION_STRING])).ingestionendpoint,r.endpointUrl=t?t+DEFAULT_BREEZE_PATH:r.endpointUrl,r[_DYN_INSTRUMENTATION_KEY]=e.instrumentationkey||r[_DYN_INSTRUMENTATION_KEY])})),o.initialize(r,[new Sender])}objDefine(e,"config",{g:function(){return r}}),t(),e.initialize=t,proxyFunctions(e,o,["track","flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange"])})}return e.__ieDyn=1,e}();exports.AppInsightsCore=AppInsightsCore,exports.ApplicationInsights=ApplicationInsights,exports.Sender=Sender,exports.SeverityLevel=SeverityLevel,exports.arrForEach=arrForEach,exports.isNullOrUndefined=isNullOrUndefined,exports.proxyFunctions=proxyFunctions,exports.throwError=throwError;
//# sourceMappingURL=aib.3.0.4.cjs.min.js.map
